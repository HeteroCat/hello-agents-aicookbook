<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第一章 初识智能体 - Hello Agents 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* 自定义样式 */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* 深色模式样式 */
        .dark {
            background-color: #0f172a;
            color: #e2e8f0;
        }
        
        .dark .bg-white {
            background-color: #1e293b;
        }
        
        .dark .text-gray-800 {
            color: #e2e8f0;
        }
        
        .dark .text-gray-600 {
            color: #94a3b8;
        }
        
        .dark .border-gray-200 {
            border-color: #334155;
        }
        
        .dark .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
        }

        .prose-custom {
            line-height: 1.75;
            max-width: none;
            color: #374151;
        }
        .dark .prose-custom {
            color: #e5e7eb;
        }
        .prose-custom h1 {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .prose-custom h2 {
            font-size: 2rem;
            font-weight: 700;
            line-height: 1.3;
            margin: 2.5rem 0 1.5rem 0;
            color: #1f2937;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }
        .dark .prose-custom h2 {
            color: #f9fafb;
            border-color: #374151;
        }
        .prose-custom h3 {
            font-size: 1.5rem;
            font-weight: 600;
            line-height: 1.4;
            margin: 2rem 0 1rem 0;
            color: #374151;
        }
        .dark .prose-custom h3 {
            color: #e5e7eb;
        }
        .prose-custom h4 {
            font-size: 1.25rem;
            font-weight: 600;
            line-height: 1.4;
            margin: 1.5rem 0 0.75rem 0;
            color: #4b5563;
        }
        .dark .prose-custom h4 {
            color: #d1d5db;
        }
        .code-block {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.875rem;
            line-height: 1.6;
            overflow-x: auto;
        }
        .dark .code-block {
            background: #1e293b;
            border-color: #334155;
            color: #e2e8f0;
        }
        .image-container {
            margin: 2rem 0;
            text-align: center;
        }
        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .image-container img:hover {
            transform: scale(1.02);
            box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15);
        }
        .image-caption {
            margin-top: 1rem;
            font-size: 0.875rem;
            color: #6b7280;
            font-style: italic;
        }
        .dark .image-caption {
            color: #9ca3af;
        }
        .table-container {
            margin: 2rem 0;
            overflow-x: auto;
            border-radius: 0.75rem;
            border: 1px solid #e5e7eb;
        }
        .dark .table-container {
            border-color: #374151;
        }
        .table-container table {
            width: 100%;
            border-collapse: collapse;
        }
        .table-container th,
        .table-container td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        .dark .table-container th,
        .dark .table-container td {
            border-color: #374151;
        }
        .table-container th {
            background: #f9fafb;
            font-weight: 600;
            color: #374151;
        }
        .dark .table-container th {
            background: #1f2937;
            color: #f9fafb;
        }
        .fade-in {
            animation: fadeIn 0.6s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .hover-lift {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .hover-lift:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        .dark ::-webkit-scrollbar-track {
            background: #374151;
        }
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #6b7280;
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
        
        /* 返回顶部按钮 */
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 3rem;
            height: 3rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }
        .back-to-top:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }
        
        /* 目录样式 */
        .toc {
            position: fixed;
            top: 50%;
            right: 2rem;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid #e5e7eb;
            border-radius: 0.75rem;
            padding: 1rem;
            max-width: 250px;
            max-height: 60vh;
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 100;
        }
        .dark .toc {
            background: rgba(31, 41, 55, 0.95);
            border-color: #374151;
        }
        .toc.show {
            opacity: 1;
            visibility: visible;
        }
        .toc h3 {
            margin: 0 0 0.75rem 0;
            font-size: 0.875rem;
            font-weight: 600;
            color: #374151;
        }
        .dark .toc h3 {
            color: #f9fafb;
        }
        .toc ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .toc li {
            margin-bottom: 0.5rem;
        }
        .toc a {
            display: block;
            padding: 0.25rem 0.5rem;
            font-size: 0.8rem;
            color: #6b7280;
            text-decoration: none;
            border-radius: 0.375rem;
            transition: all 0.2s ease;
        }
        .dark .toc a {
            color: #9ca3af;
        }
        .toc a:hover {
            background: #f3f4f6;
            color: #374151;
        }
        .dark .toc a:hover {
            background: #374151;
            color: #f9fafb;
        }
        .toc a.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans transition-colors duration-300">
    <!-- 导航栏 -->
    <nav class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-robot text-2xl text-gradient"></i>
                    <h1 class="text-xl font-bold text-gradient">Hello-Agents</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="theme-toggle" class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-moon text-gray-600"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- 目录 -->
    <div class="toc" id="toc">
        <h3><i class="fas fa-list mr-2"></i>目录</h3>
        <ul>
            <li><a href="#what-is-agent">1.1 什么是智能体？</a></li>
            <li><a href="#traditional-agents">1.1.1 传统视角下的智能体</a></li>
            <li><a href="#model-based-agents">1.1.2 基于模型的智能体</a></li>
            <li><a href="#goal-based-agents">1.1.3 基于目标的智能体</a></li>
            <li><a href="#utility-based-agents">1.1.4 基于效用的智能体</a></li>
            <li><a href="#learning-agents">1.1.5 学习型智能体</a></li>
            <li><a href="#llm-agents">1.2 大语言模型时代的智能体</a></li>
            <li><a href="#agent-types">1.3 智能体的主要类型</a></li>
            <li><a href="#reactive-agents">1.3.1 反应式智能体</a></li>
            <li><a href="#deliberative-agents">1.3.2 深思型智能体</a></li>
            <li><a href="#hybrid-agents">1.3.3 混合型智能体</a></li>
            <li><a href="#multi-agents">1.3.4 多智能体系统</a></li>
            <li><a href="#agent-environment">1.4 智能体与环境的交互</a></li>
            <li><a href="#environment-types">1.4.1 环境的类型</a></li>
            <li><a href="#interaction-patterns">1.4.2 交互模式</a></li>
            <li><a href="#summary">1.5 本章小结</a></li>
        </ul>
    </div>

    <!-- 返回顶部按钮 -->
    <button class="back-to-top" id="backToTop" title="返回顶部">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- 主要内容 -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <article class="prose-custom fade-in">
            <!-- 章节标题 -->
            <header class="mb-12 text-center">
                <h1 class="mb-4">第一章 初识智能体</h1>
                <p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
                    欢迎来到智能体的世界！在人工智能浪潮席卷全球的今天，<strong>智能体（Agent）</strong>已成为驱动技术变革与应用创新的核心概念之一。
                </p>
            </header>

            <!-- 引言 -->
            <section class="mb-12">
                <p class="text-lg leading-relaxed mb-6">
                    无论你的志向是成为AI领域的研究者、工程师，还是希望深刻理解技术前沿的观察者，掌握智能体的本质，都将是你知识体系中不可或缺的一环。
                </p>
                <p class="text-lg leading-relaxed mb-8">
                    因此，在本章，让我们回到原点，一起探讨几个问题：智能体是什么？它有哪些主要的类型？它又是如何与我们所处的世界进行交互的？通过这些讨论，希望能为你未来的学习和探索打下坚实的基础。
                </p>

                <div class="image-container">
                    <img src="../docs/images/1-figures/1757242319667-0.png" alt="智能体与环境的基本交互循环" class="hover-lift">
                    <p class="image-caption">图 1.1 智能体与环境的基本交互循环</p>
                </div>
            </section>

            <!-- 1.1 什么是智能体？ -->
            <section class="mb-12">
                <h2 id="what-is-agent">1.1 什么是智能体？</h2>
                <p class="text-lg leading-relaxed mb-6">
                    在探索任何一个复杂概念时，我们最好从一个简洁的定义开始。在人工智能领域，智能体被定义为任何能够通过<strong>传感器（Sensors）</strong>感知其所处<strong>环境（Environment）</strong>，并<strong>自主</strong>地通过<strong>执行器（Actuators）</strong>采取<strong>行动（Action）</strong>以达成特定目标的实体。
                </p>
                
                <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-6 my-8 rounded-r-lg">
                    <h4 class="font-semibold text-blue-800 dark:text-blue-200 mb-3">
                        <i class="fas fa-lightbulb mr-2"></i>智能体的四个基本要素
                    </h4>
                    <ul class="space-y-2 text-blue-700 dark:text-blue-300">
                        <li><strong>环境（Environment）</strong>：智能体所处的外部世界</li>
                        <li><strong>传感器（Sensors）</strong>：持续感知环境状态的能力</li>
                        <li><strong>执行器（Actuators）</strong>：改变环境状态的行动能力</li>
                        <li><strong>自主性（Autonomy）</strong>：独立决策和目标追求的能力</li>
                    </ul>
                </div>

                <p class="leading-relaxed mb-6">
                    环境是智能体所处的外部世界。对于自动驾驶汽车，环境是动态变化的道路交通；对于一个交易算法，环境则是瞬息万变的金融市场。智能体并非与环境隔离，它通过其传感器持续地感知环境状态。摄像头、麦克风、雷达或各类<strong>应用程序编程接口（Application Programming Interface, API）</strong>返回的数据流，都是其感知能力的延伸。
                </p>

                <p class="leading-relaxed mb-6">
                    获取信息后，智能体需要采取行动来对环境施加影响，它通过执行器来改变环境的状态。执行器可以是物理设备（如机械臂、方向盘）或虚拟工具（如执行一段代码、调用一个服务）。
                </p>

                <p class="leading-relaxed mb-8">
                    然而，真正赋予智能体"智能"的，是其<strong>自主性（Autonomy）</strong>。智能体并非只是被动响应外部刺激或严格执行预设指令的程序，它能够基于其感知和内部状态进行独立决策，以达成其设计目标。这种从感知到行动的闭环，构成了所有智能体行为的基础，如图1.1所示。
                </p>

                <!-- 1.1.1 传统视角下的智能体 -->
                <h3 id="traditional-agents">1.1.1 传统视角下的智能体</h3>
                <p class="leading-relaxed mb-6">
                    在当前<strong>大语言模型（Large Language Model, LLM）</strong>的热潮出现之前，人工智能的先驱们已经对"智能体"这一概念进行了数十年的探索与构建。这些如今我们称之为"传统智能体"的范式，并非单一的静态概念，而是经历了一条从简单到复杂、从被动反应到主动学习的清晰演进路线。
                </p>

                <p class="leading-relaxed mb-6">
                    这个演进的起点，是那些结构最简单的<strong>反射智能体（Simple Reflex Agent）</strong>。它们的决策核心由工程师明确设计的"条件-动作"规则构成，如图1.2所示。经典的自动恒温器便是如此：若传感器感知的室温高于设定值，则启动制冷系统。
                </p>

                <div class="image-container">
                    <img src="https://raw.githubusercontent.com/datawhalechina/Hello-Agents/main/docs/images/1-figures/1757242319667-1.png" alt="简单反射智能体的决策逻辑示意图" class="hover-lift">
                    <p class="image-caption">图 1.2 简单反射智能体的决策逻辑示意图</p>
                </div>

                <p class="leading-relaxed mb-6">
                    这种智能体完全依赖于当前的感知输入，不具备记忆或预测能力。它像一种数字化的本能，可靠且高效，但也因此无法应对需要理解上下文的复杂任务。它的局限性引出了一个关键问题：如果环境的当前状态不足以作为决策的全部依据，智能体该怎么办？
                </p>

                <p class="leading-relaxed mb-6">
                    为了回答这个问题，研究者们引入了"状态"的概念，发展出<strong>基于模型的反射智能体（Model-Based Reflex Agent）</strong>。这类智能体拥有一个内部的<strong>世界模型（World Model）</strong>，用于追踪和理解环境中那些无法被直接感知的方面。它试图回答："世界现在是什么样子的？"。
                </p>

                <div class="bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-6 my-8 rounded-r-lg">
                    <h4 class="font-semibold text-green-800 dark:text-green-200 mb-3">
                        <i class="fas fa-car mr-2"></i>实例：自动驾驶汽车的世界模型
                    </h4>
                    <p class="text-green-700 dark:text-green-300">
                        一辆在隧道中行驶的自动驾驶汽车，即便摄像头暂时无法感知到前方的车辆，它的内部模型依然会维持对那辆车存在、速度和预估位置的判断。这个内部模型让智能体拥有了初级的"记忆"。
                    </p>
                </div>

                <p class="leading-relaxed mb-6">
                    然而，仅仅理解世界还不够，智能体需要有明确的目标。这促进了<strong>基于目标的智能体（Goal-Based Agent）</strong>的发展。与前两者不同，它的行为不再是被动地对环境做出反应，而是主动地、有预见性地选择能够导向某个特定未来状态的行动。这类智能体需要回答的问题是："我应该做什么才能达成目标？"。
                </p>

                <p class="leading-relaxed mb-6">
                    经典的例子是GPS导航系统：你的目标是到达公司，智能体会基于地图数据（世界模型），通过搜索算法（如A*算法）来规划（Planning）出一条最优路径。这类智能体的核心能力体现在了对未来的考量与规划上。
                </p>

                <p class="leading-relaxed mb-6">
                    更进一步，现实世界的目标往往不是单一的。我们不仅希望到达公司，还希望时间最短、路程最省油并且避开拥堵。当多个目标需要权衡时，<strong>基于效用的智能体（Utility-Based Agent）</strong>便随之出现。它为每一个可能的世界状态都赋予一个效用值，这个值代表了满意度的高低。
                </p>

                <p class="leading-relaxed mb-6">
                    智能体的核心目标不再是简单地达成某个特定状态，而是最大化期望效用。它需要回答一个更复杂的问题："哪种行为能为我带来最满意的结果？"。这种架构让智能体学会在相互冲突的目标之间进行权衡，使其决策更接近人类的理性选择。
                </p>

                <p class="leading-relaxed mb-6">
                    至此，我们讨论的智能体虽然功能日益复杂，但其核心决策逻辑，无论是规则、模型还是效用函数，依然依赖于人类设计师的先验知识。如果智能体能不依赖预设，而是通过与环境的互动自主学习呢？
                </p>

                <p class="leading-relaxed mb-8">
                    这便是<strong>学习型智能体（Learning Agent）</strong>的核心思想，而<strong>强化学习（Reinforcement Learning, RL）</strong>是实现这一思想最具代表性的路径。一个学习型智能体包含一个性能元件（即我们前面讨论的各类智能体）和一个学习元件。学习元件通过观察性能元件在环境中的行动所带来的结果来不断修正性能元件的决策策略。
                </p>

                <div class="bg-purple-50 dark:bg-purple-900/20 border-l-4 border-purple-500 p-6 my-8 rounded-r-lg">
                    <h4 class="font-semibold text-purple-800 dark:text-purple-200 mb-3">
                        <i class="fas fa-chess mr-2"></i>AlphaGo：学习型智能体的里程碑
                    </h4>
                    <p class="text-purple-700 dark:text-purple-300">
                        想象一个学习下棋的AI。它开始时可能只是随机落子，当它最终赢下一局时，系统会给予它一个正向的奖励。通过大量的自我对弈，学习元件会逐渐发现哪些棋路更有可能导向最终的胜利。AlphaGo是这一理念的一个里程碑式的成就。
                    </p>
                </div>

                <!-- 1.1.2 大语言模型驱动的新范式 -->
                <h3 id="llm-driven-agents">1.1.2 大语言模型驱动的新范式</h3>
                <p class="leading-relaxed mb-6">
                    以<strong>GPT（Generative Pre-trained Transformer）</strong>为代表的大语言模型的出现，正在显著改变智能体的构建方法与能力边界。由大语言模型驱动的LLM智能体，其核心决策机制与传统智能体存在本质区别，从而赋予了其一系列全新的特性。
                </p>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>对比维度</th>
                                <th>传统智能体</th>
                                <th>LLM驱动智能体</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>核心引擎</td>
                                <td>规则引擎、搜索算法</td>
                                <td>大语言模型</td>
                            </tr>
                            <tr>
                                <td>知识来源</td>
                                <td>显式编程与知识库</td>
                                <td>预训练数据中的隐式知识</td>
                            </tr>
                            <tr>
                                <td>交互方式</td>
                                <td>结构化输入/输出</td>
                                <td>自然语言对话</td>
                            </tr>
                            <tr>
                                <td>适应性</td>
                                <td>有限的预设场景</td>
                                <td>强大的泛化能力</td>
                            </tr>
                            <tr>
                                <td>可解释性</td>
                                <td>高（逻辑清晰）</td>
                                <td>中等（可追踪推理过程）</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="image-caption">表 1.1 传统智能体与LLM驱动智能体的核心对比</p>
                </div>

                <p class="leading-relaxed mb-6">
                    这种差异使得LLM智能体可以直接处理高层级、模糊且充满上下文信息的自然语言指令。让我们以一个"智能旅行助手"为例来说明。
                </p>

                <p class="leading-relaxed mb-6">
                    在LLM智能体出现之前，规划旅行通常意味着用户需要在多个专用应用（如天气、地图、预订网站）之间手动切换，并由用户自己扮演信息整合与决策的角色。而一个LLM智能体则能将这个流程整合起来。当接收到"规划一次厦门之旅"这样的模糊指令时，它的工作方式体现了以下几点：
                </p>

                <div class="grid md:grid-cols-3 gap-6 my-8">
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-xl border border-blue-200 dark:border-blue-700 hover-lift">
                        <div class="text-blue-600 dark:text-blue-400 text-2xl mb-3">
                            <i class="fas fa-route"></i>
                        </div>
                        <h4 class="font-semibold text-blue-800 dark:text-blue-200 mb-2">规划与推理</h4>
                        <p class="text-sm text-blue-700 dark:text-blue-300">
                            智能体首先会将高层级目标分解为逻辑子任务：确认偏好 → 查询信息 → 制定草案 → 预订服务
                        </p>
                    </div>
                    <div class="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-xl border border-green-200 dark:border-green-700 hover-lift">
                        <div class="text-green-600 dark:text-green-400 text-2xl mb-3">
                            <i class="fas fa-tools"></i>
                        </div>
                        <h4 class="font-semibold text-green-800 dark:text-green-200 mb-2">工具使用</h4>
                        <p class="text-sm text-green-700 dark:text-green-300">
                            识别信息缺口，主动调用外部工具补全，如天气查询接口，并基于结果调整后续规划
                        </p>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl border border-purple-200 dark:border-purple-700 hover-lift">
                        <div class="text-purple-600 dark:text-purple-400 text-2xl mb-3">
                            <i class="fas fa-sync-alt"></i>
                        </div>
                        <h4 class="font-semibold text-purple-800 dark:text-purple-200 mb-2">动态修正</h4>
                        <p class="text-sm text-purple-700 dark:text-purple-300">
                            将用户反馈视为新约束，据此调整行为，重新搜索符合要求的选项
                        </p>
                    </div>
                </div>

                <p class="leading-relaxed mb-8">
                    总而言之，我们正从开发专用自动化工具转向构建能自主解决问题的系统。核心不再是编写代码，而是引导一个通用的"大脑"去规划、行动和学习。
                </p>

                <!-- 1.1.3 智能体的类型 -->
                <h3 id="agent-types">1.1.3 智能体的类型</h3>
                <p class="leading-relaxed mb-6">
                    继上文回顾智能体的演进后，本节将从三个互补的维度对智能体进行分类。
                </p>

                <h4 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">（1）基于内部决策架构的分类</h4>
                <p class="leading-relaxed mb-6">
                    第一种分类维度是依据智能体内部决策架构的复杂程度，这个视角在《Artificial Intelligence: A Modern Approach》中系统性地提出。正如 1.1.1 节所述，传统智能体的演进路径本身就构成了最经典的分类阶梯，它涵盖了从简单的<strong>反应式</strong>智能体，到引入内部模型的<strong>模型式</strong>智能体，再到更具前瞻性的<strong>基于目标</strong>和<strong>基于效用</strong>的智能体。此外，<strong>学习能力</strong>则是一种可赋予上述所有类型的元能力，使其能通过经验自我改进。
                </p>

                <h4 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">（2）基于时间与反应性的分类</h4>
                <p class="leading-relaxed mb-6">
                    除了内部架构的复杂性，还可以从智能体处理决策的时间维度进行分类。这个视角关注智能体是在接收到信息后立即行动，还是会经过深思熟虑的规划再行动。这揭示了智能体设计中一个核心权衡：追求速度的<strong>反应性（Reactivity）</strong>与追求最优解的<strong>规划性（Deliberation）</strong>之间的平衡，如图1.3所示。
                </p>

                <div class="image-container">
                    <img src="../docs/images/1-figures/1757242319667-3.png" alt="智能体决策时间与质量关系图" class="hover-lift">
                    <p class="image-caption">图 1.3 智能体决策时间与质量关系图</p>
                </div>

                <div class="grid md:grid-cols-2 gap-6 my-8">
                    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 p-6 rounded-xl">
                        <h5 class="font-semibold text-red-800 dark:text-red-200 mb-3">
                            <i class="fas fa-bolt mr-2"></i>反应式智能体
                        </h5>
                        <p class="text-red-700 dark:text-red-300 text-sm mb-3">
                            对环境刺激做出近乎即时的响应，决策延迟极低。遵循从感知到行动的直接映射。
                        </p>
                        <div class="text-xs text-red-600 dark:text-red-400">
                            <strong>优势：</strong>速度快、计算开销低<br>
                            <strong>劣势：</strong>短视，难以完成复杂任务<br>
                            <strong>例子：</strong>安全气囊系统、高频交易
                        </div>
                    </div>
                    <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 p-6 rounded-xl">
                        <h5 class="font-semibold text-blue-800 dark:text-blue-200 mb-3">
                            <i class="fas fa-chess mr-2"></i>规划式智能体
                        </h5>
                        <p class="text-blue-700 dark:text-blue-300 text-sm mb-3">
                            在行动前进行复杂思考和规划，系统地探索未来可能性，寻找最佳路径。
                        </p>
                        <div class="text-xs text-blue-600 dark:text-blue-400">
                            <strong>优势：</strong>决策战略性强、有远见<br>
                            <strong>劣势：</strong>时间和计算成本高<br>
                            <strong>例子：</strong>棋类AI、商业规划系统
                        </div>
                    </div>
                </div>

                <p class="leading-relaxed mb-6">
                    现实世界的复杂任务，往往既需要即时反应，也需要长远规划。例如，我们之前提到的智能旅行助手，既要能根据用户的即时反馈（如"这家酒店太贵了"）调整推荐（反应性），又要能规划出为期数天的完整旅行方案（规划性）。因此，<strong>混合式智能体</strong>应运而生，它旨在结合两者的优点，实现反应与规划的平衡。
                </p>

                <p class="leading-relaxed mb-6">
                    一种经典的混合架构是分层设计：底层是一个快速的反应模块，处理紧急情况和基本动作；高层则是一个审慎的规划模块，负责制定长远目标。而现代的LLM智能体，则展现了一种更灵活的混合模式。它们通常在一个"思考-行动-观察"的循环中运作，巧妙地将两种模式融为一体：
                </p>

                <ul class="list-disc list-inside space-y-2 mb-8 ml-4">
                    <li><strong>规划(Reasoning)</strong>：在"思考"阶段，LLM分析当前状况，规划出下一步的合理行动。这是一个审议过程。</li>
                    <li><strong>反应(Acting & Observing)</strong>：在"行动"和"观察"阶段，智能体与外部工具或环境交互，并立即获得反馈。这是一个反应过程。</li>
                </ul>

                <p class="leading-relaxed mb-8">
                    通过这种方式，智能体将一个需要长远规划的宏大任务，分解为一系列"规划-反应"的微循环。这使其既能灵活应对环境的即时变化，又能通过连贯的步骤，最终完成复杂的长期目标。
                </p>

                <h4 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">（3）基于知识表示的分类</h4>
                <p class="leading-relaxed mb-6">
                    这是一个更根本的分类维度，它探究智能体用以决策的知识，究竟是以何种形式存于其"思想"之中。这个问题是人工智能领域一场持续半个多世纪的辩论核心，并塑造了两种截然不同的AI文化。
                </p>

                <div class="image-container">
                    <img src="../docs/images/1-figures/1757242319667-4.png" alt="符号主义、亚符号主义与神经符号混合主义的知识表示范式" class="hover-lift">
                    <p class="image-caption">图 1.4 符号主义、亚符号主义与神经符号混合主义的知识表示范式</p>
                </div>

                <div class="grid md:grid-cols-3 gap-6 my-8">
                    <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 p-6 rounded-xl">
                        <h5 class="font-semibold text-yellow-800 dark:text-yellow-200 mb-3">
                            <i class="fas fa-book mr-2"></i>符号主义AI
                        </h5>
                        <p class="text-yellow-700 dark:text-yellow-300 text-sm mb-3">
                            智能源于对符号的逻辑操作。知识以人类可读的规则和概念形式存储。
                        </p>
                        <div class="text-xs text-yellow-600 dark:text-yellow-400">
                            <strong>优势：</strong>透明、可解释<br>
                            <strong>劣势：</strong>脆弱、知识获取瓶颈<br>
                            <strong>比喻：</strong>一丝不苟的图书管理员
                        </div>
                    </div>
                    <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 p-6 rounded-xl">
                        <h5 class="font-semibold text-green-800 dark:text-green-200 mb-3">
                            <i class="fas fa-brain mr-2"></i>亚符号主义AI
                        </h5>
                        <p class="text-green-700 dark:text-green-300 text-sm mb-3">
                            知识隐式分布在神经网络中，通过统计模式学习获得。
                        </p>
                        <div class="text-xs text-green-600 dark:text-green-400">
                            <strong>优势：</strong>强大的模式识别、鲁棒性<br>
                            <strong>劣势：</strong>黑箱、逻辑推理能力弱<br>
                            <strong>比喻：</strong>牙牙学语的孩童
                        </div>
                    </div>
                    <div class="bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 p-6 rounded-xl">
                        <h5 class="font-semibold text-purple-800 dark:text-purple-200 mb-3">
                            <i class="fas fa-handshake mr-2"></i>神经符号主义AI
                        </h5>
                        <p class="text-purple-700 dark:text-purple-300 text-sm mb-3">
                            融合两大范式优点，既能学习又能推理，实现感知与认知的统一。
                        </p>
                        <div class="text-xs text-purple-600 dark:text-purple-400">
                            <strong>优势：</strong>兼具直觉与理性<br>
                            <strong>目标：</strong>弥合感知与认知鸿沟<br>
                            <strong>例子：</strong>现代LLM智能体
                        </div>
                    </div>
                </div>

                <p class="leading-relaxed mb-8">
                    诺贝尔经济学奖得主丹尼尔·卡尼曼（Daniel Kahneman）在其著作《思考，快与慢》（Thinking, Fast and Slow）中提出的双系统理论，为我们理解神经符号主义提供了一个绝佳的类比：<strong>系统1</strong>是快速、凭直觉、并行的思维模式，类似于亚符号主义AI强大的模式识别能力；<strong>系统2</strong>是缓慢、有条理、基于逻辑的审慎思维，恰如符号主义AI的推理过程。
                </p>
            </section>

            <!-- 1.2 智能体的构成与运行原理 -->
            <section class="mb-12">
                <h2 id="agent-architecture">1.2 智能体的构成与运行原理</h2>
                
                <!-- 1.2.1 任务环境定义 -->
                <h3 id="task-environment">1.2.1 任务环境定义</h3>
                <p class="leading-relaxed mb-6">
                    要理解智能体的运作，我们必须先理解它所处的<strong>任务环境</strong>。在人工智能领域，通常使用<strong>PEAS模型</strong>来精确描述一个任务环境，即分析其<strong>性能度量(Performance)、环境(Environment)、执行器(Actuators)和传感器(Sensors)</strong>。以上文提到的智能旅行助手为例，下表1.2展示了如何运用PEAS模型对其任务环境进行规约。
                </p>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>PEAS要素</th>
                                <th>智能旅行助手的具体体现</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>性能度量 (Performance)</strong></td>
                                <td>用户满意度、推荐准确性、响应时间、成本效益</td>
                            </tr>
                            <tr>
                                <td><strong>环境 (Environment)</strong></td>
                                <td>旅游信息网站、天气服务、预订平台、用户偏好</td>
                            </tr>
                            <tr>
                                <td><strong>执行器 (Actuators)</strong></td>
                                <td>API调用、搜索查询、预订操作、信息展示</td>
                            </tr>
                            <tr>
                                <td><strong>传感器 (Sensors)</strong></td>
                                <td>用户输入接口、API响应、实时数据流</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="image-caption">表 1.2 智能旅行助手的PEAS描述</p>
                </div>

                <p class="leading-relaxed mb-6">
                    在实践中，LLM智能体所处的数字环境展现出若干复杂特性，这些特性直接影响着智能体的设计。
                </p>

                <div class="grid md:grid-cols-2 gap-6 my-8">
                    <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 p-6 rounded-xl">
                        <h5 class="font-semibold text-blue-800 dark:text-blue-200 mb-3">
                            <i class="fas fa-eye-slash mr-2"></i>部分可观察性
                        </h5>
                        <p class="text-blue-700 dark:text-blue-300 text-sm">
                            智能体无法一次性获取所有信息，需要具备记忆和探索能力。例如，旅行助手查询航班时只能看到部分数据。
                        </p>
                    </div>
                    <div class="bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700 p-6 rounded-xl">
                        <h5 class="font-semibold text-orange-800 dark:text-orange-200 mb-3">
                            <i class="fas fa-dice mr-2"></i>随机性环境
                        </h5>
                        <p class="text-orange-700 dark:text-orange-300 text-sm">
                            行动结果不总是确定的。机票价格和余票数量可能随时变化，要求智能体处理不确定性。
                        </p>
                    </div>
                    <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 p-6 rounded-xl">
                        <h5 class="font-semibold text-green-800 dark:text-green-200 mb-3">
                            <i class="fas fa-users mr-2"></i>多智能体环境
                        </h5>
                        <p class="text-green-700 dark:text-green-300 text-sm">
                            存在其他行动者，如其他用户、自动化脚本等，它们的行为会影响环境状态。
                        </p>
                    </div>
                    <div class="bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 p-6 rounded-xl">
                        <h5 class="font-semibold text-purple-800 dark:text-purple-200 mb-3">
                            <i class="fas fa-sync mr-2"></i>序贯动态性
                        </h5>
                        <p class="text-purple-700 dark:text-purple-300 text-sm">
                            当前动作影响未来，环境自身也在变化，要求智能体快速灵活地适应。
                        </p>
                    </div>
                </div>

                <!-- 1.2.2 智能体的运行机制 -->
                <h3 id="agent-loop">1.2.2 智能体的运行机制</h3>
                <p class="leading-relaxed mb-6">
                    在定义了智能体所处的任务环境后，我们来探讨其核心的运行机制。智能体并非一次性完成任务，而是通过一个持续的循环与环境进行交互，这个核心机制被称为<strong>智能体循环 (Agent Loop)</strong>。如图1.5所示，该循环描述了智能体与环境之间的动态交互过程，构成了其自主行为的基础。
                </p>

                <div class="image-container">
                    <img src="../docs/images/1-figures/1757242319667-5.png" alt="智能体与环境交互的基本循环" class="hover-lift">
                    <p class="image-caption">图 1.5 智能体与环境交互的基本循环</p>
                </div>

                <p class="leading-relaxed mb-6">这个循环主要包含以下几个相互关联的阶段：</p>

                <div class="space-y-6 my-8">
                    <div class="flex items-start space-x-4 p-6 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl border border-blue-200 dark:border-blue-700">
                        <div class="flex-shrink-0 w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold">1</div>
                        <div>
                            <h4 class="font-semibold text-blue-800 dark:text-blue-200 mb-2">感知 (Perception)</h4>
                            <p class="text-blue-700 dark:text-blue-300 text-sm">
                                这是循环的起点。智能体通过其传感器（例如，API的监听端口、用户输入接口）接收来自环境的输入信息。这些信息，即<strong>观察 (Observation)</strong>，既可以是用户的初始指令，也可以是上一步行动所导致的环境状态变化反馈。
                            </p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-4 p-6 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl border border-green-200 dark:border-green-700">
                        <div class="flex-shrink-0 w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center font-bold">2</div>
                        <div>
                            <h4 class="font-semibold text-green-800 dark:text-green-200 mb-2">思考 (Thought)</h4>
                            <p class="text-green-700 dark:text-green-300 text-sm mb-3">
                                接收到观察信息后，智能体进入其核心决策阶段。对于LLM智能体而言，这通常是由大语言模型驱动的内部推理过程。"思考"阶段可进一步细分为两个关键环节：
                            </p>
                            <ul class="text-green-700 dark:text-green-300 text-sm space-y-1 ml-4">
                                <li><strong>规划 (Planning)</strong>：基于当前观察和内部记忆，更新对任务和环境的理解，制定或调整行动计划</li>
                                <li><strong>工具选择 (Tool Selection)</strong>：从可用工具库中选择最适合的工具，并确定调用参数</li>
                            </ul>
                        </div>
                    </div>

                    <div class="flex items-start space-x-4 p-6 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border border-purple-200 dark:border-purple-700">
                        <div class="flex-shrink-0 w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold">3</div>
                        <div>
                            <h4 class="font-semibold text-purple-800 dark:text-purple-200 mb-2">行动 (Action)</h4>
                            <p class="text-purple-700 dark:text-purple-300 text-sm">
                                决策完成后，智能体通过其执行器（Actuators）执行具体的行动。这通常表现为调用一个选定的工具（如代码解释器、搜索引擎API），从而对环境施加影响，意图改变环境的状态。
                            </p>
                        </div>
                    </div>
                </div>

                <p class="leading-relaxed mb-8">
                    行动并非循环的终点。智能体的行动会引起<strong>环境 (Environment)</strong> 的<strong>状态变化 (State Change)</strong>，环境随即会产生一个新的<strong>观察 (Observation)</strong> 作为结果反馈。这个新的观察又会在下一轮循环中被智能体的感知系统捕获，形成一个持续的"感知-思考-行动-观察"的闭环。智能体正是通过不断重复这一循环，逐步推进任务，从初始状态向目标状态演进。
                </p>

                <!-- 1.2.3 智能体的感知与行动 -->
                <h3 id="perception-action">1.2.3 智能体的感知与行动</h3>
                <p class="leading-relaxed mb-6">
                    在工程实践中，为了让LLM能够有效驱动这个循环，我们需要一套明确的<strong>交互协议 (Interaction Protocol)</strong> 来规范其与环境之间的信息交换。
                </p>

                <p class="leading-relaxed mb-6">
                    在许多现代智能体框架中，这一协议体现在对智能体每一次输出的结构化定义上。智能体的输出不再是单一的自然语言回复，而是一段遵循特定格式的文本，其中明确地展示了其内部的推理过程与最终决策。
                </p>

                <p class="leading-relaxed mb-6">这个结构通常包含两个核心部分：</p>

                <div class="grid md:grid-cols-2 gap-6 my-8">
                    <div class="bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-700 p-6 rounded-xl">
                        <h5 class="font-semibold text-indigo-800 dark:text-indigo-200 mb-3">
                            <i class="fas fa-lightbulb mr-2"></i>Thought (思考)
                        </h5>
                        <p class="text-indigo-700 dark:text-indigo-300 text-sm">
                            这是智能体内部决策的"快照"。它以自然语言形式阐述了智能体如何分析当前情境、回顾上一步的观察结果、进行自我反思与问题分解，并最终规划出下一步的具体行动。
                        </p>
                    </div>
                    <div class="bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-700 p-6 rounded-xl">
                        <h5 class="font-semibold text-teal-800 dark:text-teal-200 mb-3">
                            <i class="fas fa-cog mr-2"></i>Action (行动)
                        </h5>
                        <p class="text-teal-700 dark:text-teal-300 text-sm">
                            这是智能体基于思考后，决定对环境施加的具体操作，通常以函数调用的形式表示。
                        </p>
                    </div>
                </div>

                <p class="leading-relaxed mb-6">例如，一个正在规划旅行的智能体可能会生成如下格式化的输出：</p>

                <div class="code-block">
<pre>Thought: 用户想知道北京的天气。我需要调用天气查询工具。
Action: get_weather("北京")</pre>
                </div>

                <p class="leading-relaxed mb-6">
                    这里的`Action`字段构成了对外部世界的指令。一个外部的<strong>解析器 (Parser)</strong> 会捕捉到这个指令，并调用相应的`get_weather`函数。
                </p>

                <p class="leading-relaxed mb-6">
                    行动执行后，环境会返回一个结果。例如，`get_weather`函数可能返回一个包含详细天气数据的JSON对象。然而，原始的机器可读数据（如JSON）通常包含LLM无需关注的冗余信息，且格式不符合其自然语言处理的习惯。
                </p>

                <p class="leading-relaxed mb-6">
                    因此，感知系统的一个重要职责就是扮演传感器的角色：将这个原始输出处理并封装成一段简洁、清晰的自然语言文本，即观察。
                </p>

                <div class="code-block">
<pre>Observation: 北京当前天气为晴，气温25摄氏度，微风。</pre>
                </div>

                <p class="leading-relaxed mb-8">
                    这段`Observation`文本会被反馈给智能体，作为下一轮循环的主要输入信息，供其进行新一轮的`Thought`和`Action`。
                </p>

                <p class="leading-relaxed mb-8">
                    综上所述，通过这个由Thought、Action、Observation构成的严谨循环，LLM智能体得以将内部的语言推理能力，与外部环境的真实信息和工具操作能力有效地结合起来。
                </p>
            </section>

            <!-- 1.3 动手体验：5 分钟实现第一个智能体 -->
            <section class="mb-12">
                <h2 id="hands-on-experience">1.3 动手体验：5 分钟实现第一个智能体</h2>
                <p class="leading-relaxed mb-6">
                    在前面的小节，我们学习了智能体的任务环境、核心运行机制以及 `Thought-Action-Observation` 交互范式。理论知识固然重要，但最好的学习方式是亲手实践。在本节中，我们将引导您使用几行简单的Python代码，从零开始构建一个可以工作的智能旅行助手。
                </p>

                <div class="bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-500 p-6 my-8 rounded-r-lg">
                    <h4 class="font-semibold text-amber-800 dark:text-amber-200 mb-3">
                        <i class="fas fa-target mr-2"></i>实践目标
                    </h4>
                    <p class="text-amber-700 dark:text-amber-300">
                        构建一个能处理分步任务的智能旅行助手，处理用户请求："你好，请帮我查询一下今天北京的天气，然后根据天气推荐一个合适的旅游景点。"
                    </p>
                </div>

                <p class="leading-relaxed mb-8">
                    这个过程将遵循我们刚刚学到的理论循环，让您直观地感受到一个智能体是如何"思考"并与外部"工具"互动的。让我们开始吧！
                </p>

                <!-- 1.3.1 准备工作 -->
                <h3 id="preparation">1.3.1 准备工作</h3>
                <p class="leading-relaxed mb-6">
                    为了能从Python程序中访问网络API，我们需要一个HTTP库。`requests`是Python社区中最流行、最易用的选择。`tavily-python`是一个强大的AI搜索API客户端，用于获取实时的网络搜索结果。`openai`是OpenAI官方提供的Python SDK，用于调用GPT等大语言模型服务。请先通过以下命令安装它们：
                </p>

                <div class="code-block">
<pre>pip install requests tavily-python openai</pre>
                </div>

                <h4 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">环境变量配置</h4>
                <p class="leading-relaxed mb-6">
                    在开始编码之前，我们需要配置一些API密钥。请在您的环境中设置以下变量：
                </p>

                <div class="code-block">
<pre># 设置环境变量
export OPENAI_API_KEY="your-openai-api-key"
export TAVILY_API_KEY="your-tavily-api-key"
export OPENAI_BASE_URL="https://api.openai.com/v1"  # 或您的API服务地址</pre>
                </div>

                <!-- 1.3.2 定义智能体的系统提示 -->
                <h3 id="system-prompt">1.3.2 定义智能体的系统提示</h3>
                <p class="leading-relaxed mb-6">
                    系统提示（System Prompt）是智能体的"DNA"，它定义了智能体的身份、能力和行为模式。一个好的系统提示应该清晰地说明智能体的角色、可用工具以及输出格式。
                </p>

                <div class="code-block">
<pre>AGENT_SYSTEM_PROMPT = """
你是一个智能旅行助手，能够帮助用户规划旅行并提供相关信息。

你有以下工具可以使用：
1. get_weather(city): 获取指定城市的天气信息
2. search_attraction(city, weather): 根据城市和天气搜索合适的旅游景点

请按照以下格式回复：
Thought: [你的思考过程]
Action: [要执行的动作，格式为函数调用]

如果不需要使用工具，请直接回复用户。
"""</pre>
                </div>

                <!-- 1.3.3 实现工具函数 -->
                <h3 id="tool-functions">1.3.3 实现工具函数</h3>
                <p class="leading-relaxed mb-6">
                    接下来，我们需要实现智能体可以调用的工具函数。这些函数是智能体与外部世界交互的桥梁。
                </p>

                <h4 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">天气查询工具</h4>
                <div class="code-block">
<pre>import requests
import json

def get_weather(city):
    """
    获取指定城市的天气信息
    这里使用模拟数据，实际应用中可以接入真实的天气API
    """
    # 模拟天气数据
    weather_data = {
        "北京": {"temperature": 25, "condition": "晴", "wind": "微风"},
        "上海": {"temperature": 28, "condition": "多云", "wind": "东南风"},
        "广州": {"temperature": 32, "condition": "雷阵雨", "wind": "南风"},
        "深圳": {"temperature": 30, "condition": "阴", "wind": "无风"}
    }
    
    if city in weather_data:
        data = weather_data[city]
        return f"{city}当前天气：{data['condition']}，气温{data['temperature']}°C，{data['wind']}"
    else:
        return f"抱歉，暂时无法获取{city}的天气信息"</pre>
                </div>

                <h4 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">景点搜索工具</h4>
                <div class="code-block">
<pre>from tavily import TavilyClient
import os

def search_attraction(city, weather):
    """
    根据城市和天气条件搜索合适的旅游景点
    """
    try:
        # 初始化Tavily客户端
        tavily = TavilyClient(api_key=os.getenv("TAVILY_API_KEY"))
        
        # 构建搜索查询
        query = f"{city} {weather} 适合的旅游景点推荐"
        
        # 执行搜索
        response = tavily.search(query=query, max_results=3)
        
        # 处理搜索结果
        attractions = []
        for result in response.get('results', []):
            attractions.append({
                'title': result.get('title', ''),
                'content': result.get('content', '')[:200] + '...'
            })
        
        return f"根据{city}的{weather}天气，推荐以下景点：" + \
               "\n".join([f"- {attr['title']}: {attr['content']}" for attr in attractions])
    
    except Exception as e:
        return f"搜索景点时出现错误：{str(e)}"</pre>
                </div>

                <h4 class="text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200">工具注册</h4>
                <div class="code-block">
<pre># 可用工具字典
available_tools = {
    "get_weather": get_weather,
    "search_attraction": search_attraction
}</pre>
                </div>

                <!-- 1.3.4 实现智能体核心逻辑 -->
                <h3 id="agent-core">1.3.4 实现智能体核心逻辑</h3>
                <p class="leading-relaxed mb-6">
                    现在我们来实现智能体的核心逻辑，包括与LLM的交互和工具调用的解析。
                </p>

                <div class="code-block">
<pre>from openai import OpenAI
import re
import os

class OpenAICompatibleClient:
    def __init__(self):
        self.client = OpenAI(
            api_key=os.getenv("OPENAI_API_KEY"),
            base_url=os.getenv("OPENAI_BASE_URL", "https://api.openai.com/v1")
        )
    
    def chat_completion(self, messages, model="gpt-3.5-turbo"):
        """调用LLM进行对话"""
        try:
            response = self.client.chat.completions.create(
                model=model,
                messages=messages,
                temperature=0.7,
                max_tokens=1000
            )
            return response.choices[0].message.content
        except Exception as e:
            return f"调用LLM时出现错误：{str(e)}"
    
    def parse_action(self, response):
        """解析LLM响应中的Action"""
        # 使用正则表达式提取Action
        action_pattern = r'Action:\s*([a-zA-Z_]+)\((.*?)\)'
        match = re.search(action_pattern, response)
        
        if match:
            function_name = match.group(1)
            # 简单解析参数（实际应用中需要更robust的解析）
            params_str = match.group(2).strip('"\'')
            params = [p.strip().strip('"\'') for p in params_str.split(',') if p.strip()]
            return function_name, params
        
        return None, None</pre>
                </div>

                <!-- 1.3.5 主执行循环 -->
                <h3 id="main-loop">1.3.5 主执行循环</h3>
                <p class="leading-relaxed mb-6">
                    最后，我们实现智能体的主执行循环，这是整个系统的核心，体现了我们之前讨论的"感知-思考-行动-观察"循环。
                </p>

                <div class="code-block">
<pre>def run_agent():
    """运行智能体主循环"""
    client = OpenAICompatibleClient()
    
    # 初始化对话历史
    messages = [{"role": "system", "content": AGENT_SYSTEM_PROMPT}]
    
    print("🤖 智能旅行助手已启动！输入 'quit' 退出。\n")
    
    while True:
        # 获取用户输入
        user_input = input("👤 用户: ").strip()
        if user_input.lower() == 'quit':
            print("👋 再见！")
            break
        
        # 添加用户消息到历史
        messages.append({"role": "user", "content": user_input})
        
        # 开始智能体循环
        max_iterations = 5  # 防止无限循环
        for iteration in range(max_iterations):
            print(f"\n🔄 循环 {iteration + 1}:")
            
            # 1. 思考阶段：调用LLM
            response = client.chat_completion(messages)
            print(f"🧠 智能体响应:\n{response}")
            
            # 2. 解析行动
            function_name, params = client.parse_action(response)
            
            if function_name and function_name in available_tools:
                # 3. 执行行动
                print(f"⚡ 执行工具: {function_name}({', '.join(params)})")
                
                try:
                    tool_result = available_tools[function_name](*params)
                    observation = f"Observation: {tool_result}"
                    print(f"👁️ 观察结果: {tool_result}")
                    
                    # 4. 将观察结果添加到对话历史
                    messages.append({"role": "assistant", "content": response})
                    messages.append({"role": "user", "content": observation})
                    
                except Exception as e:
                    error_msg = f"Observation: 工具执行出错 - {str(e)}"
                    print(f"❌ 错误: {str(e)}")
                    messages.append({"role": "assistant", "content": response})
                    messages.append({"role": "user", "content": error_msg})
            else:
                # 没有工具调用，直接结束循环
                messages.append({"role": "assistant", "content": response})
                print("✅ 任务完成！")
                break
        
        print("\n" + "="*50 + "\n")

# 运行智能体
if __name__ == "__main__":
    run_agent()</pre>
                </div>

                <!-- 1.3.6 运行效果展示 -->
                <h3 id="demo-results">1.3.6 运行效果展示</h3>
                <p class="leading-relaxed mb-6">
                    让我们看看这个智能体是如何处理我们的示例请求的。当用户输入"你好，请帮我查询一下今天北京的天气，然后根据天气推荐一个合适的旅游景点"时，智能体会执行以下步骤：
                </p>

                <div class="bg-gray-50 dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 my-8">
                    <h4 class="font-semibold text-gray-800 dark:text-gray-200 mb-4">
                        <i class="fas fa-terminal mr-2"></i>执行示例
                    </h4>
                    <div class="space-y-4 text-sm font-mono">
                        <div class="text-blue-600 dark:text-blue-400">👤 用户: 你好，请帮我查询一下今天北京的天气，然后根据天气推荐一个合适的旅游景点</div>
                        
                        <div class="text-green-600 dark:text-green-400">🔄 循环 1:</div>
                        <div class="text-gray-700 dark:text-gray-300 ml-4">
                            🧠 智能体响应:<br>
                            Thought: 用户想了解北京的天气，然后根据天气推荐景点。我需要先查询北京的天气。<br>
                            Action: get_weather("北京")
                        </div>
                        
                        <div class="text-purple-600 dark:text-purple-400 ml-4">⚡ 执行工具: get_weather(北京)</div>
                        <div class="text-orange-600 dark:text-orange-400 ml-4">👁️ 观察结果: 北京当前天气：晴，气温25°C，微风</div>
                        
                        <div class="text-green-600 dark:text-green-400">🔄 循环 2:</div>
                        <div class="text-gray-700 dark:text-gray-300 ml-4">
                            🧠 智能体响应:<br>
                            Thought: 现在我知道北京天气是晴天，气温25°C，微风。这是很好的天气，适合户外活动。我需要根据这个天气条件推荐合适的旅游景点。<br>
                            Action: search_attraction("北京", "晴天")
                        </div>
                        
                        <div class="text-purple-600 dark:text-purple-400 ml-4">⚡ 执行工具: search_attraction(北京, 晴天)</div>
                        <div class="text-orange-600 dark:text-orange-400 ml-4">👁️ 观察结果: 根据北京的晴天天气，推荐以下景点：...</div>
                        
                        <div class="text-green-600 dark:text-green-400">✅ 任务完成！</div>
                    </div>
                </div>

                <div class="bg-emerald-50 dark:bg-emerald-900/20 border-l-4 border-emerald-500 p-6 my-8 rounded-r-lg">
                    <h4 class="font-semibold text-emerald-800 dark:text-emerald-200 mb-3">
                        <i class="fas fa-check-circle mr-2"></i>成功案例分析
                    </h4>
                    <p class="text-emerald-700 dark:text-emerald-300 mb-3">
                        通过这个简单的例子，我们可以观察到智能体展现了以下能力：
                    </p>
                    <ul class="text-emerald-700 dark:text-emerald-300 space-y-1 ml-4">
                        <li><strong>任务分解</strong>：将复合请求分解为两个子任务</li>
                        <li><strong>工具调用</strong>：正确识别并调用相应的工具函数</li>
                        <li><strong>上下文理解</strong>：将第一步的结果作为第二步的输入</li>
                        <li><strong>结果综合</strong>：将多个工具的输出整合成完整的回答</li>
                    </ul>
                </div>

                <p class="leading-relaxed mb-8">
                    恭喜！您已经成功构建了第一个智能体。虽然这个例子相对简单，但它展示了智能体的核心工作原理：通过结构化的思考-行动-观察循环，将大语言模型的推理能力与外部工具的实用功能相结合，从而完成复杂的多步骤任务。
                </p>
            </section>

            <!-- 1.4 智能体的应用场景 -->
            <section class="mb-12">
                <h2 id="application-scenarios">1.4 智能体的应用场景</h2>
                <p class="leading-relaxed mb-6">
                    在理解了智能体的基本原理并亲手构建了第一个智能体后，让我们将视野扩展到更广阔的应用领域。智能体技术正在重塑我们与数字世界的交互方式，从个人助手到企业级自动化，从创意工具到科学研究，其应用场景日益丰富。
                </p>

                <!-- 1.4.1 智能体作为开发者工具 -->
                <h3 id="developer-tools">1.4.1 智能体作为开发者工具</h3>
                <p class="leading-relaxed mb-6">
                    在软件开发领域，智能体正在成为程序员不可或缺的伙伴。这些工具不仅能够理解代码，还能主动参与到开发流程的各个环节中。
                </p>

                <div class="grid md:grid-cols-2 gap-6 my-8">
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-xl border border-blue-200 dark:border-blue-700 hover-lift">
                        <div class="flex items-center mb-4">
                            <i class="fab fa-github text-2xl text-blue-600 dark:text-blue-400 mr-3"></i>
                            <h4 class="font-semibold text-blue-800 dark:text-blue-200">GitHub Copilot</h4>
                        </div>
                        <p class="text-blue-700 dark:text-blue-300 text-sm mb-3">
                            作为代码补全的先驱，Copilot能够根据上下文智能生成代码片段，大幅提升编程效率。
                        </p>
                        <div class="text-xs text-blue-600 dark:text-blue-400">
                            <strong>核心能力：</strong>实时代码建议、函数生成、注释转代码
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl border border-purple-200 dark:border-purple-700 hover-lift">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-robot text-2xl text-purple-600 dark:text-purple-400 mr-3"></i>
                            <h4 class="font-semibold text-purple-800 dark:text-purple-200">Claude Code</h4>
                        </div>
                        <p class="text-purple-700 dark:text-purple-300 text-sm mb-3">
                            不仅能编写代码，还能进行代码审查、架构设计讨论，提供更全面的开发支持。
                        </p>
                        <div class="text-xs text-purple-600 dark:text-purple-400">
                            <strong>核心能力：</strong>代码分析、架构建议、调试协助
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-xl border border-green-200 dark:border-green-700 hover-lift">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-code text-2xl text-green-600 dark:text-green-400 mr-3"></i>
                            <h4 class="font-semibold text-green-800 dark:text-green-200">Trae</h4>
                        </div>
                        <p class="text-green-700 dark:text-green-300 text-sm mb-3">
                            专注于代码库理解和重构，能够分析整个项目结构并提供智能化的修改建议。
                        </p>
                        <div class="text-xs text-green-600 dark:text-green-400">
                            <strong>核心能力：</strong>项目分析、智能重构、依赖管理
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-6 rounded-xl border border-orange-200 dark:border-orange-700 hover-lift">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-cursor text-2xl text-orange-600 dark:text-orange-400 mr-3"></i>
                            <h4 class="font-semibold text-orange-800 dark:text-orange-200">Cursor</h4>
                        </div>
                        <p class="text-orange-700 dark:text-orange-300 text-sm mb-3">
                            将AI深度集成到IDE中，提供对话式编程体验，让开发者能够用自然语言描述需求。
                        </p>
                        <div class="text-xs text-orange-600 dark:text-orange-400">
                            <strong>核心能力：</strong>对话式编程、智能编辑、上下文感知
                        </div>
                    </div>
                </div>

                <!-- 1.4.2 智能体作为自主协作者 -->
                <h3 id="autonomous-collaborators">1.4.2 智能体作为自主协作者</h3>
                <p class="leading-relaxed mb-6">
                    除了作为辅助工具，智能体还在向更加自主的协作者方向发展。这些系统能够独立完成复杂任务，甚至与其他智能体协作解决问题。
                </p>

                <div class="space-y-6 my-8">
                    <div class="bg-gradient-to-r from-cyan-50 to-blue-50 dark:from-cyan-900/20 dark:to-blue-900/20 p-6 rounded-xl border border-cyan-200 dark:border-cyan-700">
                        <h4 class="font-semibold text-cyan-800 dark:text-cyan-200 mb-3">
                            <i class="fas fa-baby mr-2"></i>单智能体自主循环
                        </h4>
                        <p class="text-cyan-700 dark:text-cyan-300 mb-4">
                            这类系统通过持续的自我反思和目标分解，能够独立完成长期、复杂的任务。
                        </p>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-cyan-200 dark:border-cyan-700">
                                <h5 class="font-medium text-cyan-800 dark:text-cyan-200 mb-2">BabyAGI</h5>
                                <p class="text-sm text-cyan-700 dark:text-cyan-300">
                                    通过任务创建、优先级排序和执行的循环，自主完成复杂项目。
                                </p>
                            </div>
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-cyan-200 dark:border-cyan-700">
                                <h5 class="font-medium text-cyan-800 dark:text-cyan-200 mb-2">AutoGPT</h5>
                                <p class="text-sm text-cyan-700 dark:text-cyan-300">
                                    具备长期记忆和文件操作能力，能够执行跨会话的持续任务。
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl border border-purple-200 dark:border-purple-700">
                        <h4 class="font-semibold text-purple-800 dark:text-purple-200 mb-3">
                            <i class="fas fa-users mr-2"></i>多智能体协作
                        </h4>
                        <p class="text-purple-700 dark:text-purple-300 mb-4">
                            通过角色分工和协作机制，多个智能体能够模拟团队工作，处理更加复杂的任务。
                        </p>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-purple-200 dark:border-purple-700">
                                <h5 class="font-medium text-purple-800 dark:text-purple-200 mb-2">CrewAI</h5>
                                <p class="text-sm text-purple-700 dark:text-purple-300">
                                    基于角色的多智能体框架，每个智能体承担特定职责。
                                </p>
                            </div>
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-purple-200 dark:border-purple-700">
                                <h5 class="font-medium text-purple-800 dark:text-purple-200 mb-2">AutoGen</h5>
                                <p class="text-sm text-purple-700 dark:text-purple-300">
                                    支持复杂对话流程的多智能体对话系统。
                                </p>
                            </div>
                            <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-purple-200 dark:border-purple-700">
                                <h5 class="font-medium text-purple-800 dark:text-purple-200 mb-2">MetaGPT</h5>
                                <p class="text-sm text-purple-700 dark:text-purple-300">
                                    模拟软件开发团队，从需求到代码的全流程自动化。
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-xl border border-green-200 dark:border-green-700">
                        <h4 class="font-semibold text-green-800 dark:text-green-200 mb-3">
                            <i class="fas fa-project-diagram mr-2"></i>高级控制流架构
                        </h4>
                        <p class="text-green-700 dark:text-green-300 mb-4">
                            这类系统提供了更精细的控制机制，支持复杂的决策流程和状态管理。
                        </p>
                        <div class="bg-white dark:bg-gray-800 p-4 rounded-lg border border-green-200 dark:border-green-700">
                            <h5 class="font-medium text-green-800 dark:text-green-200 mb-2">LangGraph</h5>
                            <p class="text-sm text-green-700 dark:text-green-300">
                                基于图结构的智能体框架，支持复杂的状态转换和条件分支，适合构建具有复杂逻辑的智能体应用。
                            </p>
                        </div>
                    </div>
                </div>

                <!-- 1.4.3 Workflow vs Agent -->
                <h3 id="workflow-vs-agent">1.4.3 Workflow vs Agent：两种不同的自动化范式</h3>
                <p class="leading-relaxed mb-6">
                    在讨论智能体的应用时，我们经常会遇到一个重要的概念区分：<strong>工作流（Workflow）</strong>与<strong>智能体（Agent）</strong>。虽然两者都旨在实现任务自动化，但它们的工作原理和适用场景存在本质差异。
                </p>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>对比维度</th>
                                <th>Workflow（工作流）</th>
                                <th>Agent（智能体）</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>执行方式</strong></td>
                                <td>按预定义步骤顺序执行</td>
                                <td>根据环境动态决策执行</td>
                            </tr>
                            <tr>
                                <td><strong>灵活性</strong></td>
                                <td>固定流程，变化需要重新设计</td>
                                <td>自适应，能处理未预见情况</td>
                            </tr>
                            <tr>
                                <td><strong>决策能力</strong></td>
                                <td>基于规则的条件判断</td>
                                <td>基于推理的智能决策</td>
                            </tr>
                            <tr>
                                <td><strong>适用场景</strong></td>
                                <td>标准化、重复性任务</td>
                                <td>复杂、需要创造性的任务</td>
                            </tr>
                            <tr>
                                <td><strong>可预测性</strong></td>
                                <td>高（结果确定）</td>
                                <td>中等（结果可能变化）</td>
                            </tr>
                            <tr>
                                <td><strong>维护成本</strong></td>
                                <td>低（逻辑简单）</td>
                                <td>中等（需要监控和调优）</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="image-caption">表 1.3 Workflow与Agent的核心对比</p>
                </div>

                <div class="grid md:grid-cols-2 gap-6 my-8">
                    <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 p-6 rounded-xl">
                        <h4 class="font-semibold text-blue-800 dark:text-blue-200 mb-4">
                            <i class="fas fa-cogs mr-2"></i>Workflow 的特点
                        </h4>
                        <ul class="text-blue-700 dark:text-blue-300 space-y-2 text-sm">
                            <li><strong>确定性执行</strong>：每次运行都遵循相同的步骤序列</li>
                            <li><strong>高效可靠</strong>：适合处理标准化的业务流程</li>
                            <li><strong>易于监控</strong>：执行路径清晰，便于追踪和调试</li>
                            <li><strong>成本可控</strong>：资源消耗可预测</li>
                        </ul>
                        <div class="mt-4 p-3 bg-blue-100 dark:bg-blue-800/30 rounded-lg">
                            <p class="text-xs text-blue-600 dark:text-blue-400">
                                <strong>典型应用：</strong>数据处理管道、审批流程、定时任务
                            </p>
                        </div>
                    </div>
                    <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 p-6 rounded-xl">
                        <h4 class="font-semibold text-green-800 dark:text-green-200 mb-4">
                            <i class="fas fa-brain mr-2"></i>Agent 的特点
                        </h4>
                        <ul class="text-green-700 dark:text-green-300 space-y-2 text-sm">
                            <li><strong>自主决策</strong>：能够根据情况选择最佳行动路径</li>
                            <li><strong>适应性强</strong>：处理复杂、多变的任务环境</li>
                            <li><strong>目标导向</strong>：专注于达成最终目标而非执行步骤</li>
                            <li><strong>学习能力</strong>：从经验中改进决策质量</li>
                        </ul>
                        <div class="mt-4 p-3 bg-green-100 dark:bg-green-800/30 rounded-lg">
                            <p class="text-xs text-green-600 dark:text-green-400">
                                <strong>典型应用：</strong>智能客服、内容创作、研究分析
                            </p>
                        </div>
                    </div>
                </div>

                <p class="leading-relaxed mb-8">
                    理解这种区别对于选择合适的自动化方案至关重要。当任务流程相对固定、结果要求确定时，Workflow是更好的选择；而当面对复杂、多变的问题，需要创造性解决方案时，Agent则展现出其独特价值。在实际应用中，两者往往可以结合使用，形成更强大的自动化系统。
                </p>
            </section>

            <!-- 1.5 本章小结 -->
            <section class="mb-12">
                <h2 id="chapter-summary">1.5 本章小结</h2>
                <p class="leading-relaxed mb-6">
                    在本章中，我们从智能体的基本概念出发，深入探讨了其发展历程、核心原理和实际应用。让我们回顾一下主要内容：
                </p>

                <div class="grid md:grid-cols-2 gap-6 my-8">
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-xl border border-blue-200 dark:border-blue-700">
                        <h4 class="font-semibold text-blue-800 dark:text-blue-200 mb-3">
                            <i class="fas fa-lightbulb mr-2"></i>核心概念
                        </h4>
                        <ul class="text-blue-700 dark:text-blue-300 space-y-2 text-sm">
                            <li>智能体的四要素：环境、传感器、执行器、自主性</li>
                            <li>从传统智能体到LLM驱动智能体的演进</li>
                            <li>基于架构、时间和知识表示的分类方法</li>
                        </ul>
                    </div>
                    <div class="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-xl border border-green-200 dark:border-green-700">
                        <h4 class="font-semibold text-green-800 dark:text-green-200 mb-3">
                            <i class="fas fa-cogs mr-2"></i>运行机制
                        </h4>
                        <ul class="text-green-700 dark:text-green-300 space-y-2 text-sm">
                            <li>PEAS模型：性能、环境、执行器、传感器</li>
                            <li>智能体循环：感知-思考-行动-观察</li>
                            <li>Thought-Action-Observation交互协议</li>
                        </ul>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 p-6 rounded-xl border border-purple-200 dark:border-purple-700">
                        <h4 class="font-semibold text-purple-800 dark:text-purple-200 mb-3">
                            <i class="fas fa-code mr-2"></i>实践体验
                        </h4>
                        <ul class="text-purple-700 dark:text-purple-300 space-y-2 text-sm">
                            <li>构建智能旅行助手的完整流程</li>
                            <li>工具函数的设计与实现</li>
                            <li>主执行循环的核心逻辑</li>
                        </ul>
                    </div>
                    <div class="bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-6 rounded-xl border border-orange-200 dark:border-orange-700">
                        <h4 class="font-semibold text-orange-800 dark:text-orange-200 mb-3">
                            <i class="fas fa-rocket mr-2"></i>应用前景
                        </h4>
                        <ul class="text-orange-700 dark:text-orange-300 space-y-2 text-sm">
                            <li>开发者工具：从代码补全到智能协作</li>
                            <li>自主系统：单智能体到多智能体协作</li>
                            <li>Workflow vs Agent的选择策略</li>
                        </ul>
                    </div>
                </div>

                <div class="bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 p-8 rounded-xl border border-indigo-200 dark:border-indigo-700 my-8">
                    <h4 class="font-semibold text-indigo-800 dark:text-indigo-200 mb-4 text-center">
                        <i class="fas fa-compass mr-2"></i>展望未来
                    </h4>
                    <p class="text-indigo-700 dark:text-indigo-300 text-center leading-relaxed">
                        智能体技术正处于快速发展期，从简单的任务自动化工具，逐步演进为能够独立思考、协作和学习的数字伙伴。
                        随着大语言模型能力的不断提升和多模态技术的融合，我们有理由相信，智能体将在更多领域发挥重要作用，
                        成为人类智慧的有力延伸。
                    </p>
                </div>

                <p class="leading-relaxed mb-8">
                    通过本章的学习，您已经掌握了智能体的基础知识，并具备了构建简单智能体的能力。在接下来的章节中，我们将深入探讨更高级的主题，包括智能体的记忆机制、多智能体协作、以及在特定领域的应用实践。让我们继续这段激动人心的智能体探索之旅！
                </p>
            </section>
        </article>
    </main>

    <!-- 页脚 -->
    <footer class="bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-8 mt-16">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-gray-600 dark:text-gray-400 mb-4">
                <i class="fas fa-book mr-2"></i>Hello Agents 2025 - 第一章：初识智能体
            </p>
            <p class="text-sm text-gray-500 dark:text-gray-500">
                © 2025 Hello Agents. 本内容基于开源项目整理，仅供学习交流使用。
            </p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // 主题切换功能
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;

        // 检查系统主题偏好
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const currentTheme = localStorage.getItem('theme') || (prefersDark ? 'dark' : 'light');

        // 应用主题
        if (currentTheme === 'dark') {
            html.classList.add('dark');
        }

        // 主题切换事件
        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark');
            const newTheme = html.classList.contains('dark') ? 'dark' : 'light';
            localStorage.setItem('theme', newTheme);
        });

        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // 代码块复制功能
        document.querySelectorAll('.code-block').forEach(block => {
            const button = document.createElement('button');
            button.className = 'absolute top-2 right-2 px-3 py-1 bg-gray-700 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity';
            button.innerHTML = '<i class="fas fa-copy mr-1"></i>复制';
            
            block.style.position = 'relative';
            block.classList.add('group');
            block.appendChild(button);
            
            button.addEventListener('click', () => {
                const code = block.querySelector('pre').textContent;
                navigator.clipboard.writeText(code).then(() => {
                    button.innerHTML = '<i class="fas fa-check mr-1"></i>已复制';
                    setTimeout(() => {
                        button.innerHTML = '<i class="fas fa-copy mr-1"></i>复制';
                    }, 2000);
                });
            });
        });

        // 图片懒加载和错误处理
        document.querySelectorAll('img').forEach(img => {
            img.addEventListener('error', function() {
                this.style.display = 'none';
                const placeholder = document.createElement('div');
                placeholder.className = 'bg-gray-200 dark:bg-gray-700 rounded-lg p-8 text-center text-gray-500 dark:text-gray-400';
                placeholder.innerHTML = '<i class="fas fa-image text-4xl mb-2"></i><br>图片加载失败';
                this.parentNode.insertBefore(placeholder, this);
            });
        });

        // 页面加载动画
        window.addEventListener('load', () => {
            document.querySelectorAll('.fade-in').forEach((el, index) => {
                setTimeout(() => {
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });

        // 返回顶部按钮功能
        const backToTopBtn = document.getElementById('backToTop');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopBtn.classList.add('show');
            } else {
                backToTopBtn.classList.remove('show');
            }
        });

        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // 目录切换功能（如果存在目录按钮）
        const tocToggle = document.getElementById('toc-toggle');
        const toc = document.getElementById('toc');
        
        if (tocToggle && toc) {
            tocToggle.addEventListener('click', () => {
                toc.classList.toggle('show');
            });

            // 点击页面其他地方关闭目录
            document.addEventListener('click', (e) => {
                if (!toc.contains(e.target) && !tocToggle.contains(e.target)) {
                    toc.classList.remove('show');
                }
            });
        }

        // 目录高亮当前章节
        const tocLinks = document.querySelectorAll('.toc a');
        const sections = document.querySelectorAll('h2[id], h3[id]');
        
        function updateTocHighlight() {
            let current = '';
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 100) {
                    current = section.id;
                }
            });
            
            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        }

        window.addEventListener('scroll', updateTocHighlight);
        updateTocHighlight(); // 初始化
    </script>
</body>
</html>