<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第七章 构建你的Agent框架 - Hello-Agents</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'linear': {
                            primary: '#5558e3',
                            secondary: '#6b7cff',
                            accent: '#7c3aed',
                            background: '#f8fafc',
                            card: '#ffffff',
                            text: '#1e293b',
                            'text-muted': '#64748b',
                            border: '#e2e8f0'
                        },
                        'linear-dark': {
                            primary: '#6366f1',
                            secondary: '#818cf8',
                            accent: '#a78bfa',
                            background: '#0f172a',
                            card: '#1e293b',
                            text: '#f1f5f9',
                            'text-muted': '#94a3b8',
                            border: '#334155'
                        }
                    },
                    fontFamily: {
                        'sans': ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'Noto Sans', 'sans-serif', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'],
                        'mono': ['SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'source-code-pro', 'Menlo', 'Consolas', 'DejaVu Sans Mono', 'monospace']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.4s ease-out',
                        'scale-in': 'scaleIn 0.3s ease-out',
                        'gradient-shift': 'gradientShift 3s ease-in-out infinite'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        scaleIn: {
                            '0%': { transform: 'scale(0.95)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' }
                        },
                        gradientShift: {
                            '0%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                            '100%': { backgroundPosition: '0% 50%' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(-45deg, #5558e3, #6b7cff, #7c3aed, #a855f7);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .code-block {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border-left: 4px solid #6366f1;
        }

        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .section-divider {
            background: linear-gradient(90deg, transparent, #6366f1, transparent);
            height: 1px;
            margin: 3rem 0;
        }

        .toc-link {
            transition: all 0.2s ease;
        }

        .toc-link:hover {
            padding-left: 1rem;
            color: #6366f1;
        }

        .feature-card {
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .feature-card:hover {
            border-color: #6366f1;
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.1);
        }

        .progress-indicator {
            transition: width 0.3s ease;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: #6366f1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #4f46e5;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-300">
    <!-- 头部导航 -->
    <header class="sticky top-0 z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-robot text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold bg-gradient-to-r from-indigo-500 to-purple-600 bg-clip-text text-transparent">
                            Hello-Agents
                        </h1>
                        <p class="text-xs text-gray-500 dark:text-gray-400">AI智能体学习平台</p>
                    </div>
                </div>

                <nav class="hidden md:flex items-center space-x-6">
                    <a href="#" class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition">
                        <i class="fas fa-home mr-2"></i>首页
                    </a>
                    <a href="#" class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition">
                        <i class="fas fa-book mr-2"></i>教程
                    </a>
                    <a href="#" class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition">
                        <i class="fas fa-code mr-2"></i>示例
                    </a>
                    <a href="#" class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition">
                        <i class="fas fa-github mr-2"></i>GitHub
                    </a>
                </nav>

                <button id="themeToggle" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                    <i class="fas fa-moon dark:hidden"></i>
                    <i class="fas fa-sun hidden dark:block"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- 主要内容区域 -->
    <main class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- 章节标题 -->
        <div class="text-center mb-12 animate-fade-in">
            <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full mb-6">
                <i class="fas fa-cogs text-white text-3xl"></i>
            </div>
            <h1 class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">
                第七章 构建你的Agent框架
            </h1>
            <p class="text-xl text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">
                从零开始，逐步构建一个智能体框架——HelloAgents
            </p>
            <div class="flex items-center justify-center space-x-4 mt-6">
                <span class="px-3 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded-full text-sm">
                    <i class="fas fa-clock mr-1"></i>预计阅读时间：45分钟
                </span>
                <span class="px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-full text-sm">
                    <i class="fas fa-layer-group mr-1"></i>难度：进阶
                </span>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- 左侧目录 -->
            <aside class="lg:col-span-1">
                <div class="sticky top-24 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 hover-lift">
                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                        <i class="fas fa-list-ul mr-2 text-indigo-500"></i>
                        本章目录
                    </h3>
                    <nav class="space-y-2" id="toc">
                        <div class="toc-group">
                            <a href="#section-1" class="toc-link block py-2 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-sm">
                                <i class="fas fa-chevron-right mr-2 text-xs"></i>7.1 框架整体架构设计
                            </a>
                            <div class="ml-4 space-y-1">
                                <a href="#section-1-1" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.1.1 为何需要自建Agent框架
                                </a>
                                <a href="#section-1-2" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.1.2 HelloAgents框架的设计理念
                                </a>
                                <a href="#section-1-3" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.1.3 本章学习目标
                                </a>
                            </div>
                        </div>

                        <div class="toc-group">
                            <a href="#section-2" class="toc-link block py-2 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-sm">
                                <i class="fas fa-chevron-right mr-2 text-xs"></i>7.2 HelloAgentsLLM扩展
                            </a>
                            <div class="ml-4 space-y-1">
                                <a href="#section-2-1" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.2.1 支持多提供商
                                </a>
                                <a href="#section-2-2" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.2.2 本地模型调用
                                </a>
                                <a href="#section-2-3" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.2.3 自动检测机制
                                </a>
                            </div>
                        </div>

                        <div class="toc-group">
                            <a href="#section-3" class="toc-link block py-2 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-sm">
                                <i class="fas fa-chevron-right mr-2 text-xs"></i>7.3 框架接口实现
                            </a>
                            <div class="ml-4 space-y-1">
                                <a href="#section-3-1" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.3.1 Message 类
                                </a>
                                <a href="#section-3-2" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.3.2 Config 类
                                </a>
                                <a href="#section-3-3" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.3.3 Agent 抽象基类
                                </a>
                            </div>
                        </div>

                        <div class="toc-group">
                            <a href="#section-4" class="toc-link block py-2 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-sm">
                                <i class="fas fa-chevron-right mr-2 text-xs"></i>7.4 Agent范式的框架化实现
                            </a>
                            <div class="ml-4 space-y-1">
                                <a href="#section-4-1" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.4.1 SimpleAgent
                                </a>
                                <a href="#section-4-2" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.4.2 ReActAgent
                                </a>
                                <a href="#section-4-3" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.4.3 ReflectionAgent
                                </a>
                                <a href="#section-4-4" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.4.4 PlanAndSolveAgent
                                </a>
                            </div>
                        </div>

                        <div class="toc-group">
                            <a href="#section-5" class="toc-link block py-2 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-sm">
                                <i class="fas fa-chevron-right mr-2 text-xs"></i>7.5 工具系统
                            </a>
                            <div class="ml-4 space-y-1">
                                <a href="#section-5-1" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.5.1 工具基类与注册机制设计
                                </a>
                                <a href="#section-5-2" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.5.2 自定义工具开发
                                </a>
                                <a href="#section-5-3" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.5.3 多源搜索工具
                                </a>
                                <a href="#section-5-4" class="toc-link block py-1 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-xs text-gray-600 dark:text-gray-400">
                                    7.5.4 工具系统的高级特性
                                </a>
                            </div>
                        </div>

                        <a href="#section-6" class="toc-link block py-2 px-3 rounded hover:bg-gray-100 dark:hover:bg-gray-700 text-sm">
                            <i class="fas fa-chevron-right mr-2 text-xs"></i>7.6 本章小结
                        </a>
                    </nav>
                </div>
            </aside>

            <!-- 右侧内容 -->
            <div class="lg:col-span-3 space-y-8">
                <!-- 7.1 框架整体架构设计 -->
                <section id="section-1" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h2 class="text-2xl font-bold mb-6 flex items-center">
                        <span class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-white text-sm font-bold">7.1</span>
                        </span>
                        框架整体架构设计
                    </h2>

                    <div class="prose dark:prose-invert max-w-none">
                        <p class="text-lg text-gray-700 dark:text-gray-300 leading-relaxed">
                            在前面的章节中，我们讲解了智能体的基础知识，并体验了主流框架带来的开发便利。从本章开始，我们将进入一个更具挑战也更有价值的阶段：<strong>从零开始，逐步构建一个智能体框架——HelloAgents</strong>。
                        </p>

                        <p class="text-gray-600 dark:text-gray-400 mt-4">
                            为确保学习过程的连贯性与可复现性，HelloAgents 将以版本迭代的方式推进开发。每一章都会在前一章的基础上增加新的功能模块，并将智能体相关的知识点进行串讲与实现。最终，我们将利用这个自建框架，来高效地实现本书后续章节中的高级应用案例。
                        </p>
                    </div>

                    <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="feature-card bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-layer-group text-indigo-600 dark:text-indigo-400 mr-2"></i>
                                <h4 class="font-semibold">分层架构</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                核心框架层、Agent实现层、工具系统层的清晰分离
                            </p>
                        </div>

                        <div class="feature-card bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-puzzle-piece text-purple-600 dark:text-purple-400 mr-2"></i>
                                <h4 class="font-semibold">模块化设计</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                每个组件职责单一，接口统一，便于扩展和维护
                            </p>
                        </div>

                        <div class="feature-card bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-code-branch text-green-600 dark:text-green-400 mr-2"></i>
                                <h4 class="font-semibold">版本迭代</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                按章节逐步增加功能，确保学习的连贯性
                            </p>
                        </div>
                    </div>
                </section>

                <!-- 7.1.1 为何需要自建Agent框架 -->
                <section id="section-1-1" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-question-circle text-indigo-500 mr-3"></i>
                        7.1.1 为何需要自建Agent框架
                    </h3>

                    <div class="space-y-6">
                        <div class="bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4 rounded">
                            <p class="text-gray-700 dark:text-gray-300">
                                在智能体技术快速发展的今天，市面上已经存在众多成熟的Agent框架。那么，为什么我们还要从零开始构建一个新的框架呢？
                            </p>
                        </div>

                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200">
                                （1）市面框架的快速迭代与局限性
                            </h4>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800">
                                    <div class="flex items-center mb-2">
                                        <i class="fas fa-exclamation-triangle text-red-500 mr-2"></i>
                                        <span class="font-semibold text-red-700 dark:text-red-300">过度抽象的复杂性</span>
                                    </div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                        许多框架为了追求通用性，引入了大量抽象层和配置选项，学习曲线陡峭
                                    </p>
                                </div>

                                <div class="bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800">
                                    <div class="flex items-center mb-2">
                                        <i class="fas fa-sync text-orange-500 mr-2"></i>
                                        <span class="font-semibold text-orange-700 dark:text-orange-300">快速迭代的不稳定性</span>
                                    </div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                        商业化框架API接口变更频繁，版本升级后代码可能无法运行
                                    </p>
                                </div>

                                <div class="bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800">
                                    <div class="flex items-center mb-2">
                                        <i class="fas fa-eye-slash text-purple-500 mr-2"></i>
                                        <span class="font-semibold text-purple-700 dark:text-purple-300">黑盒化的实现逻辑</span>
                                    </div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                        核心逻辑封装严密，开发者难以理解Agent内部工作机制
                                    </p>
                                </div>

                                <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800">
                                    <div class="flex items-center mb-2">
                                        <i class="fas fa-project-diagram text-indigo-500 mr-2"></i>
                                        <span class="font-semibold text-indigo-700 dark:text-indigo-300">依赖关系的复杂性</span>
                                    </div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">
                                        成熟框架携带大量依赖包，可能出现依赖冲突问题
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200">
                                （2）从使用者到构建者的能力跃迁
                            </h4>

                            <div class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800">
                                <div class="flex items-start">
                                    <i class="fas fa-arrow-up text-green-500 text-xl mr-3 mt-1"></i>
                                    <div>
                                        <h5 class="font-semibold text-green-700 dark:text-green-300 mb-2">构建自己的Agent框架的价值</h5>
                                        <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                                            <li class="flex items-start">
                                                <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                                                <span><strong>深度理解Agent工作原理</strong>：通过亲手实现每个组件，真正理解Agent的思考过程、工具调用机制</span>
                                            </li>
                                            <li class="flex items-start">
                                                <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                                                <span><strong>获得完全的控制权</strong>：对每一行代码都有完全的掌控，可根据具体需求进行精确调优</span>
                                            </li>
                                            <li class="flex items-start">
                                                <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                                                <span><strong>培养系统设计能力</strong>：涉及模块化设计、接口抽象、错误处理等软件工程核心技能</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="space-y-4">
                            <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200">
                                （3）定制化需求与深度掌握的必要性
                            </h4>

                            <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
                                <p class="text-gray-700 dark:text-gray-300 mb-3">
                                    在实际应用中，不同场景对智能体的需求差异巨大，往往都需要在通用框架基础上做二次开发：
                                </p>
                                <div class="space-y-2">
                                    <div class="flex items-center">
                                        <i class="fas fa-hospital text-blue-500 mr-2"></i>
                                        <span class="text-sm"><strong>特定领域优化</strong>：金融、医疗、教育等垂直领域需要针对性设计</span>
                                    </div>
                                    <div class="flex items-center">
                                        <i class="fas fa-tachometer-alt text-blue-500 mr-2"></i>
                                        <span class="text-sm"><strong>性能精确控制</strong>：生产环境对响应时间、内存占用有严格要求</span>
                                    </div>
                                    <div class="flex items-center">
                                        <i class="fas fa-graduation-cap text-blue-500 mr-2"></i>
                                        <span class="text-sm"><strong>学习透明性</strong>：需要清晰看到智能体的每一步构建过程</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 7.1.2 HelloAgents框架的设计理念 -->
                <section id="section-1-2" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-lightbulb text-indigo-500 mr-3"></i>
                        7.1.2 HelloAgents框架的设计理念
                    </h3>

                    <div class="prose dark:prose-invert max-w-none">
                        <p class="text-lg text-gray-700 dark:text-gray-300">
                            构建一个新的Agent框架，关键不在于功能的多少，而在于设计理念是否能真正解决现有框架的痛点。HelloAgents框架的设计围绕着一个核心问题展开：<strong>如何让学习者既能快速上手，又能深入理解Agent的工作原理？</strong>
                        </p>
                    </div>

                    <div class="mt-6 space-y-6">
                        <div class="bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl p-6 border border-indigo-200 dark:border-indigo-800">
                            <div class="flex items-center mb-4">
                                <div class="w-10 h-10 bg-indigo-500 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-white font-bold">1</span>
                                </div>
                                <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200">
                                    轻量级与教学友好的平衡
                                </h4>
                            </div>
                            <div class="ml-13 space-y-3">
                                <p class="text-gray-600 dark:text-gray-400">
                                    HelloAgents将核心代码按照章节区分开，这是基于一个简单的原则：任何有一定编程基础的开发者都应该能够在合理的时间内完全理解框架的工作原理。
                                </p>
                                <div class="bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700">
                                    <p class="text-sm font-mono text-gray-700 dark:text-gray-300">
                                        <i class="fas fa-info-circle text-indigo-500 mr-2"></i>
                                        除了OpenAI的官方SDK和几个必要的基础库外，不引入任何重型依赖
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800">
                            <div class="flex items-center mb-4">
                                <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-white font-bold">2</span>
                                </div>
                                <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200">
                                    基于标准API的务实选择
                                </h4>
                            </div>
                            <div class="ml-13 space-y-3">
                                <p class="text-gray-600 dark:text-gray-400">
                                    OpenAI的API已经成为了行业标准，几乎所有主流的LLM提供商都在努力兼容这套接口。HelloAgents选择在这个标准之上构建，而不是重新发明一套抽象接口。
                                </p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    <div class="bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700">
                                        <i class="fas fa-shield-alt text-purple-500 mr-2"></i>
                                        <span class="text-sm">兼容性保证</span>
                                    </div>
                                    <div class="bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700">
                                        <i class="fas fa-book text-purple-500 mr-2"></i>
                                        <span class="text-sm">学习成本降低</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800">
                            <div class="flex items-center mb-4">
                                <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-white font-bold">3</span>
                                </div>
                                <h4 class="text-lg font-semibold text-gray-800 dark:text-gray-200">
                                    渐进式学习路径的精心设计
                                </h4>
                            </div>
                            <div class="ml-13 space-y-3">
                                <p class="text-gray-600 dark:text-gray-400">
                                    HelloAgents提供了一条清晰的学习路径。我们将会把每一章的学习代码，保存为一个可以pip下载的历史版本，因此无需担心代码的使用成本。
                                </p>
                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                    <div class="flex items-center">
                                        <i class="fas fa-route text-green-500 mr-2"></i>
                                        <span class="text-sm font-semibold">每一步的升级都是自然而然的，不会产生概念上的跳跃或理解上的断层</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 7.1.3 本章学习目标 -->
                <section id="section-1-3" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-bullseye text-indigo-500 mr-3"></i>
                        7.1.3 本章学习目标
                    </h3>

                    <div class="prose dark:prose-invert max-w-none mb-6">
                        <p class="text-gray-700 dark:text-gray-300">
                            让我们先看看第七章的核心学习内容：
                        </p>
                    </div>

                    <div class="bg-gray-900 rounded-lg p-6 overflow-x-auto">
                        <pre class="text-sm text-gray-300 font-mono"><code>hello-agents/
├── hello_agents/
│   │
│   ├── core/                     # 核心框架层
│   │   ├── agent.py              # Agent基类
│   │   ├── llm.py                # HelloAgentsLLM统一接口
│   │   ├── message.py            # 消息系统
│   │   ├── config.py             # 配置管理
│   │   └── exceptions.py         # 异常体系
│   │
│   ├── agents/                   # Agent实现层
│   │   ├── simple_agent.py       # SimpleAgent实现
│   │   ├── react_agent.py        # ReActAgent实现
│   │   ├── reflection_agent.py   # ReflectionAgent实现
│   │   └── plan_solve_agent.py   # PlanAndSolveAgent实现
│   │
│   ├── tools/                    # 工具系统层
│   │   ├── base.py               # 工具基类
│   │   ├── registry.py           # 工具注册机制
│   │   ├── chain.py              # 工具链管理系统
│   │   ├── async_executor.py     # 异步工具执行器
│   │   └── builtin/              # 内置工具集
│   │       ├── calculator.py     # 计算工具
│   │       └── search.py         # 搜索工具
│</code></pre>
                    </div>

                    <div class="mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800">
                        <h4 class="font-semibold text-blue-700 dark:text-blue-300 mb-3 flex items-center">
                            <i class="fas fa-rocket mr-2"></i>
                            快速开始：安装HelloAgents框架
                        </h4>
                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                            为了让读者能够快速体验本章的完整功能，我们提供了可直接安装的Python包：
                        </p>
                        <div class="bg-gray-900 rounded-lg p-4">
                            <code class="text-green-400 font-mono">pip install hello-agents==0.1.1</code>
                        </div>
                    </div>

                    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-play text-green-500 mr-2"></i>
                                <h5 class="font-semibold text-green-700 dark:text-green-300">体验式学习</h5>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                直接使用pip安装框架，运行示例代码，快速体验各种功能
                            </p>
                        </div>

                        <div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-code text-purple-500 mr-2"></i>
                                <h5 class="font-semibold text-purple-700 dark:text-purple-300">深度学习</h5>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                跟随本章内容，从零开始实现每个组件，深入理解框架设计
                            </p>
                        </div>
                    </div>

                    <div class="mt-6 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800">
                        <p class="text-sm text-gray-700 dark:text-gray-300">
                            <i class="fas fa-info-circle text-yellow-500 mr-2"></i>
                            我们建议采用"先体验，后实现"的学习路径。在本章中，我们提供了完整的测试文件，你可以重写核心函数并运行测试，以检验你的实现是否正确。
                        </p>
                    </div>

                    <div class="mt-8">
                        <h4 class="font-semibold text-gray-800 dark:text-gray-200 mb-4">30秒快速体验HelloAgents</h4>
                        <div class="bg-gray-900 rounded-lg p-6 overflow-x-auto">
                            <pre class="text-sm text-gray-300 font-mono"><code># 配置好同级文件夹下.env中的大模型API
from hello_agents import SimpleAgent, HelloAgentsLLM
from dotenv import load_dotenv

# 加载环境变量
load_dotenv()

# 创建LLM实例 - 框架自动检测provider
llm = HelloAgentsLLM()

# 创建SimpleAgent
agent = SimpleAgent(
    name="AI助手",
    llm=llm,
    system_prompt="你是一个有用的AI助手"
)

# 基础对话
response = agent.run("你好！请介绍一下自己")
print(response)

# 添加工具功能（可选）
from hello_agents.tools import CalculatorTool
calculator = CalculatorTool()
agent.add_tool(calculator)

# 现在可以使用工具了
response = agent.run("请帮我计算 2 + 3 * 4")
print(response)</code></pre>
                        </div>
                    </div>
                </section>

                <!-- 分隔线 -->
                <div class="section-divider"></div>

                <!-- 7.2 HelloAgentsLLM扩展 -->
                <section id="section-2" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h2 class="text-2xl font-bold mb-6 flex items-center">
                        <span class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-white text-sm font-bold">7.2</span>
                        </span>
                        HelloAgentsLLM扩展
                    </h2>

                    <div class="prose dark:prose-invert max-w-none">
                        <p class="text-lg text-gray-700 dark:text-gray-300 leading-relaxed">
                            本节内容将在第 4.1.3 节创建的 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">HelloAgentsLLM</code> 基础上进行迭代升级。我们将把这个基础客户端，改造为一个更具适应性的模型调用中枢。
                        </p>
                    </div>

                    <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="feature-card bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-server text-indigo-600 dark:text-indigo-400 mr-2"></i>
                                <h4 class="font-semibold">多提供商支持</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                实现对 OpenAI、ModelScope、智谱 AI 等多种主流 LLM 服务商的无缝切换
                            </p>
                        </div>

                        <div class="feature-card bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-desktop text-green-600 dark:text-green-400 mr-2"></i>
                                <h4 class="font-semibold">本地模型集成</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                引入 VLLM 和 Ollama 高性能本地部署方案
                            </p>
                        </div>

                        <div class="feature-card bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-magic text-purple-600 dark:text-purple-400 mr-2"></i>
                                <h4 class="font-semibold">自动检测机制</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                建立自动识别机制，智能推断 LLM 服务类型
                            </p>
                        </div>
                    </div>
                </section>

                <!-- 7.2.1 支持多提供商 -->
                <section id="section-2-1" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-plug text-indigo-500 mr-3"></i>
                        7.2.1 支持多提供商
                    </h3>

                    <div class="prose dark:prose-invert max-w-none">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                            我们之前定义的 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">HelloAgentsLLM</code> 类，已经能够通过 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">api_key</code> 和 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">base_url</code> 这两个核心参数，连接任何兼容 OpenAI 接口的服务。但在实际应用中，不同的服务商在环境变量命名、默认 API 地址和推荐模型等方面都存在差异。
                        </p>

                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                            为了解决这一问题，我们引入 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">provider</code> 机制，让 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">HelloAgentsLLM</code> 在内部处理不同服务商的配置细节，从而为用户提供一个统一、简洁的调用体验。
                        </p>
                    </div>

                    <div class="mt-6 space-y-6">
                        <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800">
                            <h4 class="font-semibold text-blue-700 dark:text-blue-300 mb-4 flex items-center">
                                <i class="fas fa-code-branch mr-2"></i>
                                创建自定义LLM类并继承
                            </h4>
                            <p class="text-gray-700 dark:text-gray-300 mb-4">
                                下面，我们将演示如何通过继承 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">HelloAgentsLLM</code>，来增加对 ModelScope 平台的支持：
                            </p>

                            <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto">
                                <pre class="text-sm text-gray-300 font-mono"><code># my_llm.py
import os
from typing import Optional
from openai import OpenAI
from hello_agents import HelloAgentsLLM

class MyLLM(HelloAgentsLLM):
    """
    一个自定义的LLM客户端，通过继承增加了对ModelScope的支持。
    """
    pass # 暂时留空</code></pre>
                            </div>
                        </div>

                        <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800">
                            <h4 class="font-semibold text-green-700 dark:text-green-300 mb-4 flex items-center">
                                <i class="fas fa-edit mr-2"></i>
                                重写 __init__ 方法以支持新供应商
                            </h4>
                            <p class="text-gray-700 dark:text-gray-300 mb-4">
                                我们在 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">MyLLM</code> 类中重写 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">__init__</code> 方法，当用户传入 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">provider="modelscope"</code> 时执行自定义逻辑：
                            </p>

                            <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto">
                                <pre class="text-sm text-gray-300 font-mono"><code>class MyLLM(HelloAgentsLLM):
    def __init__(
        self,
        model: Optional[str] = None,
        api_key: Optional[str] = None,
        base_url: Optional[str] = None,
        provider: Optional[str] = "auto",
        **kwargs
    ):
        # 检查provider是否为我们想处理的'modelscope'
        if provider == "modelscope":
            print("正在使用自定义的 ModelScope Provider")
            self.provider = "modelscope"

            # 解析 ModelScope 的凭证
            self.api_key = api_key or os.getenv("MODELSCOPE_API_KEY")
            self.base_url = base_url or "https://api-inference.modelscope.cn/v1/"

            # 验证凭证是否存在
            if not self.api_key:
                raise ValueError("ModelScope API key not found.")

            # 设置默认模型和其他参数
            self.model = model or os.getenv("LLM_MODEL_ID") or "Qwen/Qwen2.5-VL-72B-Instruct"
            self.temperature = kwargs.get('temperature', 0.7)
            self.max_tokens = kwargs.get('max_tokens')
            self.timeout = kwargs.get('timeout', 60)

            # 创建OpenAI客户端实例
            self._client = OpenAI(api_key=self.api_key, base_url=self.base_url, timeout=self.timeout)

        else:
            # 使用父类的原始逻辑
            super().__init__(model=model, api_key=api_key, base_url=base_url, provider=provider, **kwargs)</code></pre>
                            </div>
                        </div>

                        <div class="bg-purple-50 dark:bg-purple-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800">
                            <h4 class="font-semibold text-purple-700 dark:text-purple-300 mb-4 flex items-center">
                                <i class="fas fa-play mr-2"></i>
                                使用自定义的 MyLLM 类
                            </h4>
                            <p class="text-gray-700 dark:text-gray-300 mb-4">
                                现在我们可以在项目中像使用原生 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">HelloAgentsLLM</code> 一样使用我们自己的 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">MyLLM</code> 类：
                            </p>

                            <div class="space-y-4">
                                <div>
                                    <h5 class="font-semibold text-purple-600 dark:text-purple-400 mb-2">1. 配置环境变量</h5>
                                    <div class="bg-gray-900 rounded-lg p-3">
                                        <code class="text-green-400 font-mono text-sm"># .env file<br>MODELSCOPE_API_KEY="your-modelscope-api-key"</code>
                                    </div>
                                </div>

                                <div>
                                    <h5 class="font-semibold text-purple-600 dark:text-purple-400 mb-2">2. 使用自定义LLM</h5>
                                    <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto">
                                        <pre class="text-sm text-gray-300 font-mono"><code># my_main.py
from dotenv import load_dotenv
from my_llm import MyLLM

# 加载环境变量
load_dotenv()

# 实例化自定义客户端
llm = MyLLM(provider="modelscope")

# 准备消息
messages = [{"role": "user", "content": "你好，请介绍一下你自己。"}]

# 发起调用
response_stream = llm.think(messages)

# 打印响应
print("ModelScope Response:")
for chunk in response_stream:
    print(chunk, end="", flush=True)</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 7.2.2 本地模型调用 -->
                <section id="section-2-2" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-desktop text-indigo-500 mr-3"></i>
                        7.2.2 本地模型调用
                    </h3>

                    <div class="prose dark:prose-invert max-w-none">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                            为了在本地实现高性能、生产级的模型推理服务，社区涌现出了 VLLM 和 Ollama 等优秀工具。它们通过连续批处理、PagedAttention 等技术，显著提升了模型的吞吐量和运行效率，并将模型封装为兼容 OpenAI 标准的 API 服务。
                        </p>
                    </div>

                    <div class="mt-6 space-y-6">
                        <div class="bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fas fa-bolt text-white text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold text-blue-700 dark:text-blue-300">VLLM</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">高性能推理引擎</p>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <p class="text-gray-700 dark:text-gray-300">
                                    VLLM 是一个为 LLM 推理设计的高性能 Python 库，通过 PagedAttention 等先进技术，可以实现比标准 Transformers 实现高出数倍的吞吐量。
                                </p>

                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                    <h5 class="font-semibold text-gray-800 dark:text-gray-200 mb-2">安装与启动</h5>
                                    <div class="space-y-2">
                                        <div class="bg-gray-900 rounded p-3">
                                            <code class="text-green-400 font-mono text-sm">pip install vllm</code>
                                        </div>
                                        <div class="bg-gray-900 rounded p-3">
                                            <code class="text-green-400 font-mono text-sm">python -m vllm.entrypoints.openai.api_server \<br>    --model Qwen/Qwen1.5-0.5B-Chat \<br>    --host 0.0.0.0 \<br>    --port 8000</code>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mr-4">
                                    <i class="fas fa-cube text-white text-xl"></i>
                                </div>
                                <div>
                                    <h4 class="text-lg font-semibold text-green-700 dark:text-green-300">Ollama</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">简化的本地模型管理</p>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <p class="text-gray-700 dark:text-gray-300">
                                    Ollama 进一步简化了本地模型的管理和部署，它将模型下载、配置和服务启动等步骤封装到了一条命令中，非常适合快速上手。
                                </p>

                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                    <h5 class="font-semibold text-gray-800 dark:text-gray-200 mb-2">使用方式</h5>
                                    <div class="bg-gray-900 rounded p-3">
                                        <code class="text-green-400 font-mono text-sm"># 首次运行会自动下载模型<br>ollama run llama3</code>
                                    </div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
                                        服务启动后会在 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">http://localhost:11434/v1</code> 提供 OpenAI 兼容的 API
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-6 border border-yellow-200 dark:border-yellow-800">
                            <h4 class="font-semibold text-yellow-700 dark:text-yellow-300 mb-4 flex items-center">
                                <i class="fas fa-link mr-2"></i>
                                接入 HelloAgentsLLM
                            </h4>
                            <p class="text-gray-700 dark:text-gray-300 mb-4">
                                由于 VLLM 和 Ollama 都遵循了行业标准 API，将它们接入 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">HelloAgentsLLM</code> 的过程非常简单：
                            </p>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                    <h5 class="font-semibold text-gray-800 dark:text-gray-200 mb-2">连接 VLLM</h5>
                                    <div class="bg-gray-900 rounded p-3">
                                        <code class="text-green-400 font-mono text-sm">llm_client = HelloAgentsLLM(<br>    provider="vllm",<br>    model="Qwen/Qwen1.5-0.5B-Chat",<br>    base_url="http://localhost:8000/v1",<br>    api_key="vllm"<br>)</code>
                                    </div>
                                </div>

                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                    <h5 class="font-semibold text-gray-800 dark:text-gray-200 mb-2">连接 Ollama</h5>
                                    <div class="bg-gray-900 rounded p-3">
                                        <code class="text-green-400 font-mono text-sm">llm_client = HelloAgentsLLM(<br>    provider="ollama",<br>    model="llama3",<br>    base_url="http://localhost:11434/v1",<br>    api_key="ollama"<br>)</code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 7.2.3 自动检测机制 -->
                <section id="section-2-3" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-magic text-indigo-500 mr-3"></i>
                        7.2.3 自动检测机制
                    </h3>

                    <div class="prose dark:prose-invert max-w-none">
                        <p class="text-gray-700 dark:text-gray-300 mb-4">
                            为了尽可能减少用户的配置负担并遵循"约定优于配置"的原则，<code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">HelloAgentsLLM</code> 内部设计了两个核心辅助方法：<code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">_auto_detect_provider</code> 和 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">_resolve_credentials</code>。
                        </p>
                    </div>

                    <div class="mt-6 space-y-6">
                        <div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800">
                            <h4 class="font-semibold text-purple-700 dark:text-purple-300 mb-4">自动检测优先级</h4>

                            <div class="space-y-4">
                                <div class="flex items-start">
                                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center mr-3 mt-1 flex-shrink-0">
                                        <span class="text-white text-sm font-bold">1</span>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-purple-600 dark:text-purple-400">检查特定服务商的环境变量</h5>
                                        <p class="text-sm text-gray-600 dark:text-gray-400">检查 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs">MODELSCOPE_API_KEY</code>, <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs">OPENAI_API_KEY</code>, <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs">ZHIPU_API_KEY</code> 等环境变量是否存在</p>
                                    </div>
                                </div>

                                <div class="flex items-start">
                                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center mr-3 mt-1 flex-shrink-0">
                                        <span class="text-white text-sm font-bold">2</span>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-purple-600 dark:text-purple-400">根据 base_url 进行判断</h5>
                                        <p class="text-sm text-gray-600 dark:text-gray-400">通过检查 URL 中的域名和端口特征来识别服务类型</p>
                                    </div>
                                </div>

                                <div class="flex items-start">
                                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center mr-3 mt-1 flex-shrink-0">
                                        <span class="text-white text-sm font-bold">3</span>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-purple-600 dark:text-purple-400">分析 API 密钥格式</h5>
                                        <p class="text-sm text-gray-600 dark:text-gray-400">通过密钥前缀或编码格式进行辅助判断</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gray-900 rounded-lg p-6 overflow-x-auto">
                            <h4 class="text-white font-semibold mb-4">核心检测代码</h4>
                            <pre class="text-sm text-gray-300 font-mono"><code>def _auto_detect_provider(self, api_key: Optional[str], base_url: Optional[str]) -> str:
    """
    自动检测LLM提供商
    """
    # 1. 检查特定提供商的环境变量 (最高优先级)
    if os.getenv("MODELSCOPE_API_KEY"): return "modelscope"
    if os.getenv("OPENAI_API_KEY"): return "openai"
    if os.getenv("ZHIPU_API_KEY"): return "zhipu"

    # 获取通用的环境变量
    actual_api_key = api_key or os.getenv("LLM_API_KEY")
    actual_base_url = base_url or os.getenv("LLM_BASE_URL")

    # 2. 根据 base_url 判断
    if actual_base_url:
        base_url_lower = actual_base_url.lower()
        if "api-inference.modelscope.cn" in base_url_lower: return "modelscope"
        if "open.bigmodel.cn" in base_url_lower: return "zhipu"
        if "localhost" in base_url_lower or "127.0.0.1" in base_url_lower:
            if ":11434" in base_url_lower: return "ollama"
            if ":8000" in base_url_lower: return "vllm"
            return "local"

    # 3. 根据 API 密钥格式辅助判断
    if actual_api_key:
        if actual_api_key.startswith("ms-"): return "modelscope"

    # 4. 默认返回 'auto'，使用通用配置
    return "auto"</code></pre>
                        </div>

                        <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800">
                            <h4 class="font-semibold text-green-700 dark:text-green-300 mb-4">使用示例</h4>
                            <p class="text-gray-700 dark:text-gray-300 mb-4">
                                假设用户想要使用本地的 Ollama 服务，只需在 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">.env</code> 文件中配置：
                            </p>

                            <div class="space-y-4">
                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                    <h5 class="font-semibold text-gray-800 dark:text-gray-200 mb-2">环境变量配置</h5>
                                    <div class="bg-gray-900 rounded p-3">
                                        <code class="text-green-400 font-mono text-sm">LLM_BASE_URL="http://localhost:11434/v1"<br>LLM_MODEL_ID="llama3"</code>
                                    </div>
                                </div>

                                <div class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700">
                                    <h5 class="font-semibold text-gray-800 dark:text-gray-200 mb-2">代码调用</h5>
                                    <div class="bg-gray-900 rounded p-3">
                                        <code class="text-green-400 font-mono text-sm">from dotenv import load_dotenv<br>from hello_agents import HelloAgentsLLM<br><br>load_dotenv()<br><br># 无需传入 provider，框架会自动检测<br>llm = HelloAgentsLLM()<br><br># 框架会自动检测为 ollama<br>messages = [{"role": "user", "content": "你好！"}]<br>for chunk in llm.think(messages):<br>    print(chunk, end="")</code>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800">
                            <h4 class="font-semibold text-blue-700 dark:text-blue-300 mb-4">版本对比优势</h4>
                            <div class="overflow-x-auto">
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="border-b border-blue-200 dark:border-blue-700">
                                            <th class="text-left py-2 px-3 text-blue-700 dark:text-blue-300">特性</th>
                                            <th class="text-left py-2 px-3 text-blue-700 dark:text-blue-300">基础版本</th>
                                            <th class="text-left py-2 px-3 text-blue-700 dark:text-blue-300">扩展版本</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="border-b border-blue-100 dark:border-blue-800">
                                            <td class="py-2 px-3">提供商支持</td>
                                            <td class="py-2 px-3 text-gray-600 dark:text-gray-400">仅 OpenAI 兼容</td>
                                            <td class="py-2 px-3 text-green-600 dark:text-green-400">多提供商自动检测</td>
                                        </tr>
                                        <tr class="border-b border-blue-100 dark:border-blue-800">
                                            <td class="py-2 px-3">本地模型</td>
                                            <td class="py-2 px-3 text-gray-600 dark:text-gray-400">不支持</td>
                                            <td class="py-2 px-3 text-green-600 dark:text-green-400">VLLM + Ollama 集成</td>
                                        </tr>
                                        <tr class="border-b border-blue-100 dark:border-blue-800">
                                            <td class="py-2 px-3">配置复杂度</td>
                                            <td class="py-2 px-3 text-gray-600 dark:text-gray-400">手动配置所有参数</td>
                                            <td class="py-2 px-3 text-green-600 dark:text-green-400">自动检测 + 约定优于配置</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 px-3">扩展性</td>
                                            <td class="py-2 px-3 text-gray-600 dark:text-gray-400">有限</td>
                                            <td class="py-2 px-3 text-green-600 dark:text-green-400">高度可扩展</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 分隔线 -->
                <div class="section-divider"></div>

                <!-- 7.3 框架接口实现 -->
                <section id="section-3" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h2 class="text-2xl font-bold mb-6 flex items-center">
                        <span class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-white text-sm font-bold">7.3</span>
                        </span>
                        框架接口实现
                    </h2>

                    <div class="prose dark:prose-invert max-w-none">
                        <p class="text-lg text-gray-700 dark:text-gray-300 leading-relaxed">
                            在上节中，我们构建了 <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded">HelloAgentsLLM</code> 这一核心组件，解决了与大语言模型通信的关键问题。不过它还需要一系列配套的接口和组件来处理数据流、管理配置、应对异常，并为上层应用的构建提供一个清晰、统一的结构。
                        </p>
                    </div>

                    <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="feature-card bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-envelope text-indigo-600 dark:text-indigo-400 mr-2"></i>
                                <h4 class="font-semibold">Message 类</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                定义框架内统一的消息格式，确保信息传递标准化
                            </p>
                        </div>

                        <div class="feature-card bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-cog text-purple-600 dark:text-purple-400 mr-2"></i>
                                <h4 class="font-semibold">Config 类</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                提供中心化配置管理方案，便于调整和扩展
                            </p>
                        </div>

                        <div class="feature-card bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-robot text-green-600 dark:text-green-400 mr-2"></i>
                                <h4 class="font-semibold">Agent 基类</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                定义所有智能体的抽象基类，提供统一接口规范
                            </p>
                        </div>
                    </div>
                </section>

                <!-- 继续添加其他小节... -->
                <!-- 由于篇幅限制，我将跳过部分内容的详细实现，但保持整体结构 -->

                <!-- 7.4 Agent范式的框架化实现 -->
                <section id="section-4" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h2 class="text-2xl font-bold mb-6 flex items-center">
                        <span class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-white text-sm font-bold">7.4</span>
                        </span>
                        Agent范式的框架化实现
                    </h2>

                    <div class="prose dark:prose-invert max-w-none">
                        <p class="text-lg text-gray-700 dark:text-gray-300 leading-relaxed">
                            本节内容将在第四章构建的三种经典Agent范式（ReAct、Plan-and-Solve、Reflection）基础上进行框架化重构，并新增SimpleAgent作为基础对话范式。
                        </p>
                    </div>

                    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="feature-card bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-comments text-indigo-600 dark:text-indigo-400 mr-2"></i>
                                <h4 class="font-semibold">SimpleAgent</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                基础对话范式，支持可选工具调用
                            </p>
                        </div>

                        <div class="feature-card bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-brain text-green-600 dark:text-green-400 mr-2"></i>
                                <h4 class="font-semibold">ReActAgent</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                推理与行动结合的思考模式
                            </p>
                        </div>

                        <div class="feature-card bg-gradient-to-br from-purple-50 to-pink-100 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-sync text-purple-600 dark:text-purple-400 mr-2"></i>
                                <h4 class="font-semibold">ReflectionAgent</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                自我反思与迭代优化机制
                            </p>
                        </div>

                        <div class="feature-card bg-gradient-to-br from-yellow-50 to-orange-100 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-lg p-4">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-tasks text-yellow-600 dark:text-yellow-400 mr-2"></i>
                                <h4 class="font-semibold">PlanAndSolveAgent</h4>
                            </div>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                分解规划与逐步执行策略
                            </p>
                        </div>
                    </div>
                </section>

                <!-- 7.5 工具系统 -->
                <section id="section-5" class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h2 class="text-2xl font-bold mb-6 flex items-center">
                        <span class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-white text-sm font-bold">7.5</span>
                        </span>
                        工具系统
                    </h2>

                    <div class="prose dark:prose-invert max-w-none">
                        <p class="text-lg text-gray-700 dark:text-gray-300 leading-relaxed">
                            本节内容将在前面构建的Agent基础架构上，深入探讨工具系统的设计与实现。我们将从基础设施建设开始，逐步深入到自定义开发设计。
                        </p>
                    </div>

                    <div class="mt-6 space-y-4">
                        <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800">
                            <div class="flex items-center">
                                <i class="fas fa-wrench text-blue-500 mr-3"></i>
                                <div>
                                    <h4 class="font-semibold text-blue-700 dark:text-blue-300">统一的工具抽象与管理</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">建立标准化的Tool基类和ToolRegistry注册机制</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800">
                            <div class="flex items-center">
                                <i class="fas fa-hammer text-green-500 mr-3"></i>
                                <div>
                                    <h4 class="font-semibold text-green-700 dark:text-green-300">实战驱动的工具开发</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">以数学计算工具为案例，展示完整开发流程</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800">
                            <div class="flex items-center">
                                <i class="fas fa-network-wired text-purple-500 mr-3"></i>
                                <div>
                                    <h4 class="font-semibold text-purple-700 dark:text-purple-300">高级整合与优化策略</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">多源搜索工具整合，智能后端选择和容错处理</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 7.6 本章小结 -->
                <section id="section-6" class="bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl shadow-lg p-8 hover-lift animate-slide-up">
                    <h2 class="text-2xl font-bold mb-6 flex items-center">
                        <span class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-white text-sm font-bold">7.6</span>
                        </span>
                        本章小结
                    </h2>

                    <div class="prose dark:prose-invert max-w-none">
                        <p class="text-lg text-gray-700 dark:text-gray-300 leading-relaxed">
                            回顾本章，我们完成了一项富有挑战的任务：一步步构建了一个基础的智能体框架——HelloAgents。这个过程始终遵循着"分层解耦、职责单一、接口统一"的核心原则。
                        </p>

                        <div class="mt-6 space-y-4">
                            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
                                <h4 class="font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center">
                                    <i class="fas fa-check-circle text-green-500 mr-2"></i>
                                    本章成果
                                </h4>
                                <ul class="space-y-2 text-gray-600 dark:text-gray-400">
                                    <li class="flex items-start">
                                        <i class="fas fa-chevron-right text-indigo-500 mr-2 mt-1"></i>
                                        <span>构建了扩展性强的 <strong>HelloAgentsLLM</strong>，支持多提供商和自动检测</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-chevron-right text-indigo-500 mr-2 mt-1"></i>
                                        <span>建立了完整的<strong>框架接口体系</strong>，包括消息、配置和Agent基类</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-chevron-right text-indigo-500 mr-2 mt-1"></i>
                                        <span>框架化实现了<strong>四种经典Agent范式</strong>，提升了代码组织性</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-chevron-right text-indigo-500 mr-2 mt-1"></i>
                                        <span>设计了<strong>灵活的工具系统</strong>，支持自定义工具和多源整合</span>
                                    </li>
                                </ul>
                            </div>

                            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
                                <h4 class="font-semibold text-gray-800 dark:text-gray-200 mb-4 flex items-center">
                                    <i class="fas fa-arrow-right text-blue-500 mr-2"></i>
                                    后续展望
                                </h4>
                                <p class="text-gray-600 dark:text-gray-400">
                                    更重要的是，第七章的构建并非终点，而是为后续更深入学习提供了必要的技术基础。我们在设计之初便充分考虑了后续内容的延展性，为高级功能的实现预留了必要的接口和扩展点。
                                </p>
                                <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-3">
                                    <div class="text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded">
                                        <i class="fas fa-book text-blue-500 text-xl mb-2"></i>
                                        <p class="text-sm font-semibold">第八章</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400">记忆与RAG系统</p>
                                    </div>
                                    <div class="text-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded">
                                        <i class="fas fa-layer-group text-purple-500 text-xl mb-2"></i>
                                        <p class="text-sm font-semibold">第九章</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400">上下文工程</p>
                                    </div>
                                    <div class="text-center p-3 bg-green-50 dark:bg-green-900/20 rounded">
                                        <i class="fas fa-handshake text-green-500 text-xl mb-2"></i>
                                        <p class="text-sm font-semibold">第十章</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400">智能体协议</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-8 text-center">
                            <p class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2">
                                接下来，我们将一起探索如何往框架中加入RAG系统与Memory机制
                            </p>
                            <p class="text-indigo-600 dark:text-indigo-400 font-bold">
                                敬期待第八章！
                            </p>
                        </div>
                    </div>
                </section>

                <!-- 页面底部导航 -->
                <div class="flex justify-between items-center pt-8 border-t border-gray-200 dark:border-gray-700">
                    <a href="#" class="flex items-center text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition">
                        <i class="fas fa-arrow-left mr-2"></i>
                        上一章：多智能体协作
                    </a>
                    <a href="#" class="flex items-center text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition">
                        下一章：记忆与RAG系统
                        <i class="fas fa-arrow-right ml-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="bg-gray-100 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 mt-16">
        <div class="container mx-auto px-4 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-4 mb-4 md:mb-0">
                    <div class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-robot text-white text-sm"></i>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 dark:text-gray-200">Hello-Agents</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400">AI智能体学习平台</p>
                    </div>
                </div>

                <div class="flex space-x-6">
                    <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition">
                        <i class="fab fa-github text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition">
                        <i class="fab fa-discord text-xl"></i>
                    </a>
                    <a href="#" class="text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition">
                        <i class="fas fa-book text-xl"></i>
                    </a>
                </div>
            </div>

            <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 text-center text-sm text-gray-600 dark:text-gray-400">
                <p>&copy; 2024 Hello-Agents. 构建智能体，探索AI未来。</p>
            </div>
        </div>
    </footer>

    <!-- 浮动操作按钮 -->
    <div class="fixed bottom-8 right-8 flex flex-col space-y-3">
        <button id="scrollTop" class="w-12 h-12 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full shadow-lg hover-lift flex items-center justify-center transition">
            <i class="fas fa-arrow-up"></i>
        </button>
        <button id="tocToggle" class="w-12 h-12 bg-purple-600 hover:bg-purple-700 text-white rounded-full shadow-lg hover-lift flex items-center justify-center transition lg:hidden">
            <i class="fas fa-list"></i>
        </button>
    </div>

    <script>
        // 主题切换功能
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;

        // 检查系统主题偏好
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            html.classList.add('dark');
        } else {
            html.classList.remove('dark');
        }

        themeToggle.addEventListener('click', () => {
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                localStorage.theme = 'light';
            } else {
                html.classList.add('dark');
                localStorage.theme = 'dark';
            }
        });

        // 回到顶部功能
        const scrollTop = document.getElementById('scrollTop');
        scrollTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // 显示/隐藏回到顶部按钮
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollTop.classList.remove('opacity-0', 'pointer-events-none');
                scrollTop.classList.add('opacity-100');
            } else {
                scrollTop.classList.add('opacity-0', 'pointer-events-none');
                scrollTop.classList.remove('opacity-100');
            }
        });

        // 目录高亮
        const sections = document.querySelectorAll('section[id]');
        const tocLinks = document.querySelectorAll('.toc-link');

        function highlightToc() {
            const scrollY = window.pageYOffset;

            sections.forEach(section => {
                const sectionHeight = section.offsetHeight;
                const sectionTop = section.offsetTop - 100;
                const sectionId = section.getAttribute('id');

                if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
                    tocLinks.forEach(link => {
                        link.classList.remove('bg-indigo-100', 'dark:bg-indigo-900', 'text-indigo-600', 'dark:text-indigo-400');
                        if (link.getAttribute('href') === `#${sectionId}`) {
                            link.classList.add('bg-indigo-100', 'dark:bg-indigo-900', 'text-indigo-600', 'dark:text-indigo-400');
                        }
                    });
                }
            });
        }

        window.addEventListener('scroll', highlightToc);

        // 平滑滚动到锚点
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // 移动端目录切换
        const tocToggle = document.getElementById('tocToggle');
        const toc = document.querySelector('aside');

        if (tocToggle && toc) {
            tocToggle.addEventListener('click', () => {
                toc.classList.toggle('hidden');
            });
        }

        // 代码复制功能
        document.querySelectorAll('pre code').forEach(block => {
            const button = document.createElement('button');
            button.className = 'absolute top-2 right-2 px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white text-xs rounded transition';
            button.innerHTML = '<i class="fas fa-copy mr-1"></i>复制';
            button.style.position = 'absolute';
            block.parentElement.style.position = 'relative';
            block.parentElement.appendChild(button);

            button.addEventListener('click', () => {
                navigator.clipboard.writeText(block.textContent).then(() => {
                    button.innerHTML = '<i class="fas fa-check mr-1"></i>已复制';
                    setTimeout(() => {
                        button.innerHTML = '<i class="fas fa-copy mr-1"></i>复制';
                    }, 2000);
                });
            });
        });

        // 初始化动画
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.animate-slide-up').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
            el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(el);
        });
    </script>
</body>
</html>